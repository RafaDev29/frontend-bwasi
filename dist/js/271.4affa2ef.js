"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[271],{9980:function(e,t,a){a.d(t,{$x:function(){return s},F7:function(){return c},Qt:function(){return n},ZL:function(){return r},ZZ:function(){return i}});var o=a(1189);const l="https://api.bwasi.maquiadev.com/api/v1";function r(e){return o.A.get(`${l}/areas`,{headers:{Authorization:`Bearer ${e}`}})}function s(e,t){return o.A.delete(`${l}/areas/${t}`,{headers:{Authorization:`Bearer ${e}`}})}function n(e,t){return o.A.post(`${l}/areas`,t,{headers:{Authorization:`Bearer ${e}`}})}function i(e,t,a){return o.A.patch(`${l}/areas/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}function c(e,t,a){return o.A.patch(`${l}/areas/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}},650:function(e,t,a){a.d(t,{Be:function(){return i},IE:function(){return r},W7:function(){return n},jO:function(){return s}});var o=a(1189);const l="https://api.bwasi.maquiadev.com/api/v1";function r(e){return o.A.get(`${l}/type-mobileitems`,{headers:{Authorization:`Bearer ${e}`}})}function s(e,t){return o.A.delete(`${l}/type-mobileitems/${t}`,{headers:{Authorization:`Bearer ${e}`}})}function n(e,t){return o.A.post(`${l}/type-mobileitems`,t,{headers:{Authorization:`Bearer ${e}`}})}function i(e,t,a){return o.A.patch(`${l}/type-mobileitems/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}},3129:function(e,t,a){a.d(t,{ED:function(){return r},du:function(){return s},tH:function(){return i},y:function(){return n}});var o=a(1189);const l="https://api.bwasi.maquiadev.com/api/v1";function r(e){return o.A.get(`${l}/group-areas`,{headers:{Authorization:`Bearer ${e}`}})}function s(e,t){return o.A.delete(`${l}/group-areas/${t}`,{headers:{Authorization:`Bearer ${e}`}})}function n(e,t){return o.A.post(`${l}/group-areas`,t,{headers:{Authorization:`Bearer ${e}`}})}function i(e,t,a){return o.A.patch(`${l}/group-areas/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}},2678:function(e,t,a){a.d(t,{Go:function(){return i},dK:function(){return r},dU:function(){return n},oY:function(){return s}});var o=a(1189);const l="https://api.bwasi.maquiadev.com/api/v1";function r(e){return o.A.get(`${l}/group-mobileitems`,{headers:{Authorization:`Bearer ${e}`}})}function s(e,t){return o.A.delete(`${l}/group-mobileitems/${t}`,{headers:{Authorization:`Bearer ${e}`}})}function n(e,t){return o.A.post(`${l}/group-mobileitems`,t,{headers:{Authorization:`Bearer ${e}`}})}function i(e,t,a){return o.A.patch(`${l}/group-mobileitems/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}},9509:function(e,t,a){a.d(t,{IO:function(){return c},a$:function(){return i},bN:function(){return r},hO:function(){return n},uq:function(){return s}});var o=a(1189);const l="https://api.bwasi.maquiadev.com/api/v1";function r(e){return o.A.get(`${l}/layouts`,{headers:{Authorization:`Bearer ${e}`}})}function s(e,t){return o.A.delete(`${l}/layouts/${t}`,{headers:{Authorization:`Bearer ${e}`}})}function n(e,t){return o.A.post(`${l}/layouts`,t,{headers:{Authorization:`Bearer ${e}`}})}function i(e,t,a){return o.A.patch(`${l}/layouts/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}function c(e,t,a){return o.A.post(`${l}/layouts/updatebackgroundImage/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}},4271:function(e,t,a){a.r(t),a.d(t,{default:function(){return gt}});var o=a(6768);const l={class:"flex justify-between items-center"},r={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75 z-[9999]"};function s(e,t,a,s,n,i){const c=(0,o.g2)("DataTable"),u=(0,o.g2)("AntennasModal"),d=(0,o.g2)("createForm"),m=(0,o.g2)("EditForm");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",null,[(0,o.Lk)("div",l,[t[1]||(t[1]=(0,o.Lk)("h1",{class:"font-bold lg:text-2xl text-xl text-gray-500 mb-5"}," Reglas de Notificaciones",-1)),(0,o.Lk)("button",{class:"flex items-center justify-center bg-[#497fae] text-white font-bold px-4 py-1 rounded-lg hover:bg-[#6999c2] shadow-md mdi mdi-plus text-xl",onClick:t[0]||(t[0]=(...e)=>s.openCreateForm&&s.openCreateForm(...e))})]),(0,o.bF)(c,{ref:"dataTable",items:s.items,onViewAntennas:s.listAntennas,onDeleteItem:s.deleteItems,onEditItem:s.openEditForm,onSelectedItemsEvent:s.massiveUpdate},null,8,["items","onViewAntennas","onDeleteItem","onEditItem","onSelectedItemsEvent"]),s.isAntennasModalVisible?((0,o.uX)(),(0,o.Wv)(u,{key:0,antennas:s.selectedAntennas,onClose:s.closeAntennaModal,isVisible:s.isAntennasModalVisible},null,8,["antennas","onClose","isVisible"])):(0,o.Q3)("",!0),s.isCreateFormVisible?((0,o.uX)(),(0,o.Wv)(d,{key:1,onClose:s.closeCreateForm,onItemCreate:s.submitItems},null,8,["onClose","onItemCreate"])):(0,o.Q3)("",!0),s.isEditFormVisible?((0,o.uX)(),(0,o.Wv)(m,{key:2,item:s.selectedItem,onClose:s.closeEditForm,onUpdateItem:s.updateItems},null,8,["item","onClose","onUpdateItem"])):(0,o.Q3)("",!0)]),s.isLoading?((0,o.uX)(),(0,o.CE)("div",r,t[2]||(t[2]=[(0,o.Lk)("div",{class:"flex flex-col items-center space-y-4"},[(0,o.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white"}),(0,o.Lk)("p",{class:"text-white text-lg font-semibold"},"Cargando, por favor espera...")],-1)]))):(0,o.Q3)("",!0)],64)}var n=a(144),i=a(1189);const c="https://api.bwasi.maquiadev.com/api/v1";function u(e){return i.A.get(`${c}/alerts-rule`,{headers:{Authorization:`Bearer ${e}`}})}function d(e,t){return i.A.delete(`${c}/alerts-rule/${t}`,{headers:{Authorization:`Bearer ${e}`}})}function m(e,t){return i.A.post(`${c}/alerts-rule`,t,{headers:{Authorization:`Bearer ${e}`}})}function p(e,t,a){return i.A.patch(`${c}/alerts-rule/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}function f(e,t){return i.A.post(`${c}/alerts-rule/update-massive`,t,{headers:{Authorization:`Bearer ${e}`}})}var b=a(5130),y=a(4232);const x={class:"overflow-hidden bg-white rounded-xl shadow-2xl max-w-md w-ful max-h-[95vh] overflow-y-auto",style:{"max-height":"80vh"}},v={class:"flex justify-between items-center px-6 py-4 bg-gradient-to-r from-#497fae-500 to-#497fae-700 text-white"},k={class:"p-6"},g={class:"w-full border-collapse"},h={class:"py-2 px-4 font-medium text-gray-700 capitalize"},L={class:"py-2 px-4 text-gray-600"},E={class:"flex justify-end px-6 py-4 bg-gray-100"};function w(e,t,a,l,r,s){return a.isVisible?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-600 bg-opacity-40 z-[9999]",onClick:t[2]||(t[2]=(0,b.D$)(((...e)=>l.closeModal&&l.closeModal(...e)),["self"]))},[(0,o.Lk)("div",x,[(0,o.Lk)("div",v,[t[4]||(t[4]=(0,o.Lk)("h1",{class:"text-lg font-semibold flex items-center"},[(0,o.Lk)("i",{class:"mdi mdi-database text-2xl mr-2"}),(0,o.eW)(" Detalles de Antena ")],-1)),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e)),class:"text-white hover:text-gray-200 transition"},t[3]||(t[3]=[(0,o.Lk)("i",{class:"mdi mdi-close text-2xl"},null,-1)]))]),(0,o.Lk)("div",k,[(0,o.Lk)("table",g,[(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.antennaDetails,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t,class:"border-b"},[(0,o.Lk)("td",h,(0,y.v_)(t),1),(0,o.Lk)("td",L,(0,y.v_)(e),1)])))),128))])])]),(0,o.Lk)("div",E,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.closeModal&&l.closeModal(...e)),class:"px-5 py-2 text-sm font-medium text-white bg-[#396895] rounded-lg hover:bg-[#396895] transition"}," Cerrar ")])])])):(0,o.Q3)("",!0)}var A={name:"ViewDetails",props:{isVisible:{type:Boolean,required:!0},antennas:{type:Object,required:!1,default:()=>({})}},emits:["close"],setup(e,{emit:t}){const a=()=>{t("close")};let l=e.antennas?.typeContact.email.range||"N/A";"PERSONALIZED"===l[0]&&"PROXY"===l[1]?l="PERSONALIZADO Y APODERADOS":"PROXY"===l[0]&&"PERSONALIZED"===l[1]?l="PERSONALIZADO Y APODERADO":"PROXY"===l[0]?l="APODERADO":"PERSONALIZED"===l[0]?l="PERSONALIZADO":0==l.length&&(l="Sin contactos");const r=(0,o.EW)((()=>({Nombre:e.antennas?.name||"N/A",Tipo:e.antennas?.type||"N/A","Límite de Tiempo":e.antennas?.timeLimit||"N/A",Notificaciones:e.antennas?.typeNotification?.join(", ")||"N/A",Emails:e.antennas?.emails?.join(", ")||"N/A","Números":e.antennas?.numbers?.join(", ")||"N/A",Contacto:l})));return{closeModal:a,antennaDetails:r}}},C=a(1241);const I=(0,C.A)(A,[["render",w],["__scopeId","data-v-2e9942ba"]]);var R=I;const $={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-[9990]"},B={class:"bg-white rounded-lg shadow-lg max-w-md w-full p-6 max-h-[80vh] overflow-y-auto"},V={class:"mb-4"},S={class:"mb-4"},N={key:0,class:"mb-4 max-h-[20vh] overflow-y-auto"},T=["value"],D={class:"text-sm text-gray-700"},U={class:"mb-4"},O={key:1,class:"mb-4 max-h-[20vh] overflow-y-auto"},_=["value"],X={class:"text-sm text-gray-700"},z={class:"mb-4"},F={key:2,class:"mb-4"},M={class:"relative"},P={class:"mb-6"},K={class:"flex flex-col"},q={class:"flex items-center space-x-3 mb-4"},Q={key:0,class:"pl-5 border-l-2 border-#497fae-300"},G={class:"flex gap-5 mb-4"},W={class:"flex items-center space-x-2"},Z={class:"flex items-center space-x-2"},j={key:0,class:"ml-5 max-h-[20vh] overflow-y-auto"},H=["id","onUpdate:modelValue"],Y=["onClick"],J={class:"flex items-center space-x-3 mt-4"},ee={key:1,class:"pl-5 border-l-2 border-#099cb4-300"},te={class:"flex gap-5 mb-4"},ae={class:"flex items-center space-x-2"},oe={class:"flex items-center space-x-2"},le={key:0,class:"ml-5 max-h-[20vh] overflow-y-auto"},re=["id","onUpdate:modelValue"],se=["onClick"],ne={class:"flex justify-end space-x-2"};function ie(e,t,a,l,r,s){return l.item?((0,o.uX)(),(0,o.CE)("div",$,[(0,o.Lk)("div",B,[t[43]||(t[43]=(0,o.Lk)("h2",{class:"text-xl font-semibold text-gray-700 mb-4 text-center"},"Crear Nueva regla",-1)),(0,o.Lk)("form",{onSubmit:t[18]||(t[18]=(0,b.D$)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[(0,o.Lk)("div",V,[t[19]||(t[19]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.form.name=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[b.Jo,l.form.name]])]),(0,o.Lk)("div",S,[t[21]||(t[21]=(0,o.Lk)("label",{for:"espacios",class:"block mb-2 text-sm font-medium text-gray-900"},"Selecciona un tipo",-1)),(0,o.bo)((0,o.Lk)("select",{id:"espacios","onUpdate:modelValue":t[1]||(t[1]=e=>l.form.typeGateways=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-#497fae-500 focus:border-#497fae-500 block w-full p-2.5"},t[20]||(t[20]=[(0,o.Lk)("option",{value:"LAYOUT"},"Layouts",-1),(0,o.Lk)("option",{value:"AREA"},"Áreas",-1),(0,o.Lk)("option",{value:"GROUP_AREAS"},"Grupo de áreas",-1)]),512),[[b.u1,l.form.typeGateways]])]),l.layouts.length>0?((0,o.uX)(),(0,o.CE)("div",N,[t[22]||(t[22]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-2"},"Seleccionar opciones",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>l.searchQuery=e),placeholder:"Buscar opciones...",class:"w-full p-2 border border-gray-300 rounded mb-4 text-sm"},null,512),[[b.Jo,l.searchQuery]]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.filteredLayouts,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e._id,class:"flex items-center space-x-2"},[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:e._id,"onUpdate:modelValue":t[3]||(t[3]=e=>l.selectedGateways=e)},null,8,T),[[b.lH,l.selectedGateways]]),(0,o.Lk)("label",D,(0,y.v_)(e.name),1)])))),128))])):(0,o.Q3)("",!0),(0,o.Lk)("div",U,[t[24]||(t[24]=(0,o.Lk)("label",{for:"espacios",class:"block mb-2 text-sm font-medium text-gray-900"},"Selecciona un tipo",-1)),(0,o.bo)((0,o.Lk)("select",{id:"espacios","onUpdate:modelValue":t[4]||(t[4]=e=>l.form.typeItemsMobiles=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#497fae] focus:border-[#497fae] block w-full p-2.5"},t[23]||(t[23]=[(0,o.Lk)("option",{value:"GROUP_ITEMMOBILE"},"Grupo de Etiquetas",-1),(0,o.Lk)("option",{value:"TYPE_ITEMMOBILE"},"Categoria de Etiquetas",-1)]),512),[[b.u1,l.form.typeItemsMobiles]])]),l.etiquetas.length>0?((0,o.uX)(),(0,o.CE)("div",O,[t[25]||(t[25]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-2"},"Seleccionar opciones",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>l.searchQuery2=e),placeholder:"Buscar opciones...",class:"w-full p-2 border border-gray-300 rounded mb-4 text-sm"},null,512),[[b.Jo,l.searchQuery2]]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.filteredEtiquetas,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e._id,class:"flex items-center space-x-2"},[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:e._id,"onUpdate:modelValue":t[6]||(t[6]=e=>l.selectTags=e)},null,8,_),[[b.lH,l.selectTags]]),(0,o.Lk)("label",X,(0,y.v_)(e.name),1)])))),128))])):(0,o.Q3)("",!0),(0,o.Lk)("div",z,[t[27]||(t[27]=(0,o.Lk)("label",{for:"tipo",class:"block mb-2 text-sm font-medium text-gray-900"},"Selecciona un evento",-1)),(0,o.bo)((0,o.Lk)("select",{id:"tipos","onUpdate:modelValue":t[7]||(t[7]=e=>l.form.type=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-#497fae-500 focus:border-#497fae-500 block w-full p-2.5"},t[26]||(t[26]=[(0,o.Lk)("option",{value:"ENTRADA"},"Entrada",-1),(0,o.Lk)("option",{value:"SALIDA"},"Salida",-1)]),512),[[b.u1,l.form.type]])]),"PERMANENCIA"==l.form.type?((0,o.uX)(),(0,o.CE)("div",F,[t[28]||(t[28]=(0,o.Lk)("label",{for:"tipo",class:"block mb-2 text-sm font-medium text-gray-900"},"Selecciona un tiempo",-1)),(0,o.Lk)("div",M,[(0,o.bo)((0,o.Lk)("input",{type:"time",step:"1","onUpdate:modelValue":t[8]||(t[8]=e=>l.form.timeLimit=e),class:"bg-black-50 border leading-none border-black-300 text-black-900 text-sm rounded-lg focus:ring-#497fae-500 focus:border-#497fae-500 block w-full p-2.5 dark:bg-white-700 dark:border-white-600 dark:placeholder-black-400 dark:text-black dark:focus:ring-#497fae-500 dark:focus:border-#497fae-500",value:"00:00:00",required:""},null,512),[[b.Jo,l.form.timeLimit]])])])):(0,o.Q3)("",!0),(0,o.Lk)("div",P,[t[41]||(t[41]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-900 mb-3"},"Seleccionar Notificaciones",-1)),(0,o.Lk)("div",K,[(0,o.Lk)("div",q,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"true","onUpdate:modelValue":t[9]||(t[9]=e=>l.form.EmailStatus=e),id:"email-notification",class:"cursor-pointer accent-[#497fae] w-4 h-4"},null,512),[[b.lH,l.form.EmailStatus]]),t[29]||(t[29]=(0,o.Lk)("label",{for:"email-notification",class:"text-sm text-gray-700 cursor-pointer flex items-center"},[(0,o.Lk)("i",{class:"fa fa-envelope text-[#497fae] mr-2"}),(0,o.eW)(" Email ")],-1))]),l.form.EmailStatus?((0,o.uX)(),(0,o.CE)("div",Q,[t[34]||(t[34]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-2"},"Seleccionar Destinatarios",-1)),(0,o.Lk)("div",G,[(0,o.Lk)("div",W,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"PROXY","onUpdate:modelValue":t[10]||(t[10]=e=>l.form.typeContactEmail=e),id:"email-proxy",class:"cursor-pointer accent-#497fae-500 w-4 h-4"},null,512),[[b.lH,l.form.typeContactEmail]]),t[30]||(t[30]=(0,o.Lk)("label",{for:"email-proxy",class:"text-sm text-gray-700 cursor-pointer"},"Apoderados",-1))]),(0,o.Lk)("div",Z,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"PERSONALIZED","onUpdate:modelValue":t[11]||(t[11]=e=>l.form.typeContactEmail=e),id:"email-personalized",class:"cursor-pointer accent-#497fae-500 w-4 h-4"},null,512),[[b.lH,l.form.typeContactEmail]]),t[31]||(t[31]=(0,o.Lk)("label",{for:"email-personalized",class:"text-sm text-gray-700 cursor-pointer"},"Personalizado",-1))])]),l.form.typeContactEmail.includes("PERSONALIZED")?((0,o.uX)(),(0,o.CE)("div",j,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.form.emails,((e,a)=>((0,o.uX)(),(0,o.CE)("div",{key:a,class:"flex items-center mb-2 space-x-2"},[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"email-input-"+a,"onUpdate:modelValue":e=>l.form.emails[a]=e,class:"flex-grow bg-gray-100 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-#497fae-500 focus:border-#497fae-500 block w-full p-2 shadow-sm transition-all duration-200",placeholder:"sysnet@gmail.com",required:""},null,8,H),[[b.Jo,l.form.emails[a]]]),(0,o.Lk)("button",{type:"button",onClick:e=>l.removeEmail(a),class:"text-red-600 hover:text-red-800 focus:outline-none focus:ring-2 focus:ring-red-500 rounded transition-all duration-200"},t[32]||(t[32]=[(0,o.Lk)("i",{class:"mdi mdi-trash-can-outline text-sm"},null,-1)]),8,Y)])))),128)),(0,o.Lk)("button",{type:"button",onClick:t[12]||(t[12]=(...e)=>l.addEmail&&l.addEmail(...e)),class:"mt-2 flex items-center px-2 py-1 bg-[#396895] text-white font-medium text-xs rounded-lg shadow-md hover:bg-[#396895] focus:ring-2 focus:ring-[#497fae] focus:outline-none transition-all duration-200"},t[33]||(t[33]=[(0,o.Lk)("i",{class:"mdi mdi-plus-circle-outline text-sm mr-2"},null,-1),(0,o.eW)(" Agregar Correo ")]))])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),(0,o.Lk)("div",J,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"true","onUpdate:modelValue":t[13]||(t[13]=e=>l.form.NumberStatus=e),id:"whatsapp-notification",class:"cursor-pointer accent-#099cb4-500 w-4 h-4"},null,512),[[b.lH,l.form.NumberStatus]]),t[35]||(t[35]=(0,o.Lk)("label",{for:"whatsapp-notification",class:"text-sm text-gray-700 cursor-pointer flex items-center"},[(0,o.Lk)("i",{class:"fa fa-whatsapp text-#099cb4-500 mr-2"}),(0,o.eW)(" WhatsApp ")],-1))]),l.form.NumberStatus?((0,o.uX)(),(0,o.CE)("div",ee,[t[40]||(t[40]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-2"},"Seleccionar Destinatarios",-1)),(0,o.Lk)("div",te,[(0,o.Lk)("div",ae,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"PROXY","onUpdate:modelValue":t[14]||(t[14]=e=>l.form.typeContactNumber=e),id:"whatsapp-proxy",class:"cursor-pointer accent-#099cb4-500 w-4 h-4"},null,512),[[b.lH,l.form.typeContactNumber]]),t[36]||(t[36]=(0,o.Lk)("label",{for:"whatsapp-proxy",class:"text-sm text-gray-700 cursor-pointer"},"Apoderados",-1))]),(0,o.Lk)("div",oe,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"PERSONALIZED","onUpdate:modelValue":t[15]||(t[15]=e=>l.form.typeContactNumber=e),id:"whatsapp-personalized",class:"cursor-pointer accent-#099cb4-500 w-4 h-4"},null,512),[[b.lH,l.form.typeContactNumber]]),t[37]||(t[37]=(0,o.Lk)("label",{for:"whatsapp-personalized",class:"text-sm text-gray-700 cursor-pointer"},"Personalizado",-1))])]),l.form.typeContactNumber.includes("PERSONALIZED")?((0,o.uX)(),(0,o.CE)("div",le,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.form.numbers,((e,a)=>((0,o.uX)(),(0,o.CE)("div",{key:a,class:"flex items-center mb-2 space-x-2"},[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"phone-input-"+a,"onUpdate:modelValue":e=>l.form.numbers[a]=e,class:"flex-grow bg-gray-100 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#497fae] focus:border-[#497fae] block w-full p-2 shadow-sm transition-all duration-200",placeholder:"929831019",required:""},null,8,re),[[b.Jo,l.form.numbers[a]]]),(0,o.Lk)("button",{type:"button",onClick:e=>l.removeNumber(a),class:"text-red-600 hover:text-red-800 focus:outline-none focus:ring-2 focus:ring-red-500 rounded transition-all duration-200"},t[38]||(t[38]=[(0,o.Lk)("i",{class:"mdi mdi-trash-can-outline text-lg"},null,-1)]),8,se)])))),128)),(0,o.Lk)("button",{type:"button",onClick:t[16]||(t[16]=(...e)=>l.addNumber&&l.addNumber(...e)),class:"mt-3 flex items-center px-2 py-1 bg-[#099cb4] text-white font-medium text-xs rounded-lg shadow-md hover:bg-[#099cb4] focus:ring-2 focus:ring-[#099cb4] focus:outline-none transition-all duration-200"},t[39]||(t[39]=[(0,o.Lk)("i",{class:"mdi mdi-plus-circle-outline text-sm mr-2"},null,-1),(0,o.eW)(" Agregar Teléfono ")]))])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",ne,[(0,o.Lk)("button",{type:"button",onClick:t[17]||(t[17]=(...e)=>l.closeDialog&&l.closeDialog(...e)),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"}," Cancelar "),t[42]||(t[42]=(0,o.Lk)("button",{type:"submit",class:"px-4 py-2 bg-[#396895] text-white rounded-lg hover:bg-[#396895]"}," Guardar ",-1))])],32)])])):(0,o.Q3)("",!0)}a(4114),a(8992),a(4520);var ce=a(9509),ue=a(9980),de=a(3129),me=a(2678),pe=a(650),fe=a(5129),be={emits:["close","ItemCreate"],setup(e,{emit:t}){const a=(0,n.KR)(!0),l=(0,n.KR)([]),r=(0,n.KR)([]),s=(0,n.KR)({name:"",typeGateways:"",typeItemsMobiles:"",type:"",timeLimit:"",NumberStatus:!1,EmailStatus:!1,emails:[],numbers:[],typeContact:[],status:!0,typeContactNumber:[],typeContactEmail:[]}),i=(0,n.KR)(""),c=(0,n.KR)(""),u=(0,n.KR)([]),d=(0,n.KR)([]),m=(0,o.EW)((()=>{const e=i.value.toLowerCase();return l.value.filter((t=>t.name.toLowerCase().includes(e)))})),p=(0,o.EW)((()=>{const e=c.value.toLowerCase();return r.value.filter((t=>t.name.toLowerCase().includes(e)))})),f=async()=>{const e=fe.A.state.token,t=await(0,ce.bN)(e);l.value=t.data.data},b=async()=>{const e=fe.A.state.token,t=await(0,ue.ZL)(e);l.value=t.data.data},y=async()=>{const e=fe.A.state.token,t=await(0,de.ED)(e);l.value=t.data.data},x=async()=>{const e=fe.A.state.token,t=await(0,me.dK)(e);r.value=t.data.data},v=async()=>{const e=fe.A.state.token,t=await(0,pe.IE)(e);r.value=t.data.data},k=()=>{t("close")},g=()=>{const e={name:s.value.name,gateways:u.value,typeGateways:s.value.typeGateways,itemsMobiles:d.value,typeItemsMobiles:s.value.typeItemsMobiles,type:s.value.type,timeLimit:s.value.timeLimit,typeNotification:s.value.typeNotification,typeContact:{email:{status:s.value.EmailStatus,range:s.value.typeContactEmail,items:s.value.emails},whatsapp:{status:s.value.NumberStatus,range:s.value.typeContactNumber,items:s.value.numbers}},status:s.value.status};console.log(e),t("ItemCreate",e)};(0,o.wB)((()=>s.value.typeGateways),(async e=>{u.value=[],l.value=[],"LAYOUT"===e?await f():"AREA"===e?await b():"GROUP_AREAS"===e&&await y()})),(0,o.wB)((()=>s.value.typeItemsMobiles),(async e=>{d.value=[],r.value=[],"GROUP_ITEMMOBILE"===e?await x():"TYPE_ITEMMOBILE"===e&&await v()}));const h=()=>{s.value.numbers.push("")},L=e=>{s.value.numbers.splice(e,1)},E=()=>{s.value.emails.push("")},w=e=>{s.value.emails.splice(e,1)};return{item:a,form:s,closeDialog:k,submitForm:g,layouts:l,selectedGateways:u,selectTags:d,etiquetas:r,addNumber:h,removeNumber:L,addEmail:E,removeEmail:w,searchQuery:i,searchQuery2:c,filteredLayouts:m,filteredEtiquetas:p}}};const ye=(0,C.A)(be,[["render",ie]]);var xe=ye;const ve={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-[9999]"},ke={class:"bg-white rounded-lg shadow-lg max-w-lg w-full p-6 max-h-[80vh] overflow-y-auto"},ge={class:"flex mb-4"},he={class:"flex-1"},Le={class:""},Ee={class:"flex items-center"},we={class:"mb-4"},Ae={key:0,class:"mb-4 max-h-[20vh] overflow-y-auto"},Ce=["value"],Ie={class:"text-sm text-gray-700"},Re={class:"mb-4"},$e={key:1,class:"mb-4 max-h-[20vh] overflow-y-auto"},Be=["value"],Ve={class:"text-sm text-gray-700"},Se={class:"mb-4"},Ne={key:2,class:"mb-4"},Te={class:"mb-6"},De={class:"flex flex-col"},Ue={class:"flex items-center space-x-3 mb-4"},Oe={key:0,class:"pl-5 border-l-2 border-[#497fae]"},_e={class:"flex gap-5 mb-4"},Xe={class:"flex items-center space-x-2"},ze={class:"flex items-center space-x-2"},Fe={key:0,class:"ml-5 max-h-[20vh] overflow-y-auto"},Me=["id","onUpdate:modelValue"],Pe=["onClick"],Ke={class:"flex items-center space-x-3 mt-4"},qe={key:1,class:"pl-5 border-l-2 border-#099cb4-300"},Qe={class:"flex gap-5 mb-4"},Ge={class:"flex items-center space-x-2"},We={class:"flex items-center space-x-2"},Ze={key:0,class:"ml-5 max-h-[20vh] overflow-y-auto"},je=["id","onUpdate:modelValue"],He=["onClick"],Ye={class:"flex justify-end space-x-2"};function Je(e,t,a,l,r,s){return a.item?((0,o.uX)(),(0,o.CE)("div",ve,[(0,o.Lk)("div",ke,[t[45]||(t[45]=(0,o.Lk)("h2",{class:"text-xl font-semibold text-gray-700 mb-4 text-center"},"Editar regla",-1)),(0,o.Lk)("form",{onSubmit:t[19]||(t[19]=(0,b.D$)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[(0,o.Lk)("div",ge,[(0,o.Lk)("div",he,[t[20]||(t[20]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.form.name=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:ring-2 focus:ring-[#497fae] focus:border-[#497fae]",required:""},null,512),[[b.Jo,l.form.name]])]),(0,o.Lk)("div",Le,[t[21]||(t[21]=(0,o.Lk)("label",{class:"block text-sm font-bold text-gray-500 mb-3 ml-2"},"Estado",-1)),(0,o.Lk)("div",Ee,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>l.form.status=e),class:"toggle-checkbox ml-5"},null,512),[[b.lH,l.form.status]])])])]),(0,o.Lk)("div",we,[t[23]||(t[23]=(0,o.Lk)("label",{for:"espacios",class:"block mb-2 text-sm font-medium text-gray-900"},"Selecciona un tipo",-1)),(0,o.bo)((0,o.Lk)("select",{id:"espacios","onUpdate:modelValue":t[2]||(t[2]=e=>l.form.typeGateways=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#497fae] focus:border-[#497fae] block w-full p-2.5"},t[22]||(t[22]=[(0,o.Lk)("option",{value:"LAYOUT"},"Layouts",-1),(0,o.Lk)("option",{value:"AREA"},"Áreas",-1),(0,o.Lk)("option",{value:"GROUP_AREAS"},"Grupo de Áreas",-1)]),512),[[b.u1,l.form.typeGateways]])]),l.layouts.length>0?((0,o.uX)(),(0,o.CE)("div",Ae,[t[24]||(t[24]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-2"},"Seleccionar opciones",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>l.searchQuery=e),placeholder:"Buscar opciones...",class:"w-full p-2 border border-gray-300 rounded mb-4 text-sm"},null,512),[[b.Jo,l.searchQuery]]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.filteredLayouts,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e._id,class:"flex items-center space-x-2"},[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:e._id,"onUpdate:modelValue":t[4]||(t[4]=e=>l.selectedGateways=e)},null,8,Ce),[[b.lH,l.selectedGateways]]),(0,o.Lk)("label",Ie,(0,y.v_)(e.name),1)])))),128))])):(0,o.Q3)("",!0),(0,o.Lk)("div",Re,[t[26]||(t[26]=(0,o.Lk)("label",{for:"etiquetas",class:"block mb-2 text-sm font-medium text-gray-900"},"Selecciona un tipo",-1)),(0,o.bo)((0,o.Lk)("select",{id:"etiquetas","onUpdate:modelValue":t[5]||(t[5]=e=>l.form.typeItemsMobiles=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#497fae] focus:border-[#497fae] block w-full p-2.5"},t[25]||(t[25]=[(0,o.Lk)("option",{value:"GROUP_ITEMMOBILE"},"Grupo de Etiquetas",-1),(0,o.Lk)("option",{value:"TYPE_ITEMMOBILE"},"Categoría de Etiquetas",-1)]),512),[[b.u1,l.form.typeItemsMobiles]])]),l.etiquetas.length>0?((0,o.uX)(),(0,o.CE)("div",$e,[t[27]||(t[27]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-2"},"Seleccionar opciones",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>l.searchQuery2=e),placeholder:"Buscar opciones...",class:"w-full p-2 border border-gray-300 rounded mb-4 text-sm"},null,512),[[b.Jo,l.searchQuery2]]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.filteredEtiquetas,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e._id,class:"flex items-center space-x-2"},[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:e._id,"onUpdate:modelValue":t[7]||(t[7]=e=>l.selectTags=e)},null,8,Be),[[b.lH,l.selectTags]]),(0,o.Lk)("label",Ve,(0,y.v_)(e.name),1)])))),128))])):(0,o.Q3)("",!0),(0,o.Lk)("div",Se,[t[29]||(t[29]=(0,o.Lk)("label",{for:"tipo",class:"block mb-2 text-sm font-medium text-gray-900"},"Selecciona un tipo",-1)),(0,o.bo)((0,o.Lk)("select",{id:"tipo","onUpdate:modelValue":t[8]||(t[8]=e=>l.form.type=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#497fae] focus:border-[#497fae] block w-full p-2.5"},t[28]||(t[28]=[(0,o.Lk)("option",{value:"ENTRADA"},"Entrada",-1),(0,o.Lk)("option",{value:"SALIDA"},"Salida",-1)]),512),[[b.u1,l.form.type]])]),"PERMANENCIA"==l.form.type?((0,o.uX)(),(0,o.CE)("div",Ne,[t[30]||(t[30]=(0,o.Lk)("label",{for:"timeLimit",class:"block mb-2 text-sm font-medium text-gray-900"},"Selecciona un tiempo",-1)),(0,o.bo)((0,o.Lk)("input",{type:"time",step:"1",value:"00:00:00","onUpdate:modelValue":t[9]||(t[9]=e=>l.form.timeLimit=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#497fae] focus:border-[#497fae] block w-full p-2.5",required:""},null,512),[[b.Jo,l.form.timeLimit]])])):(0,o.Q3)("",!0),(0,o.Lk)("div",Te,[t[43]||(t[43]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-900 mb-3"},"Seleccionar Notificaciones",-1)),(0,o.Lk)("div",De,[(0,o.Lk)("div",Ue,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"true","onUpdate:modelValue":t[10]||(t[10]=e=>l.form.typeContact.email.status=e),id:"email-notification",class:"cursor-pointer accent-[#497fae] w-4 h-4"},null,512),[[b.lH,l.form.typeContact.email.status]]),t[31]||(t[31]=(0,o.Lk)("label",{for:"email-notification",class:"text-sm text-gray-700 cursor-pointer flex items-center"},[(0,o.Lk)("i",{class:"fa fa-envelope text-[#497fae] mr-2"}),(0,o.eW)(" Email ")],-1))]),l.form.typeContact.email.status?((0,o.uX)(),(0,o.CE)("div",Oe,[t[36]||(t[36]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-2"},"Seleccionar Destinatarios",-1)),(0,o.Lk)("div",_e,[(0,o.Lk)("div",Xe,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"PROXY","onUpdate:modelValue":t[11]||(t[11]=e=>l.form.typeContact.email.range=e),id:"email-proxy",class:"cursor-pointer accent-[#497fae] w-4 h-4"},null,512),[[b.lH,l.form.typeContact.email.range]]),t[32]||(t[32]=(0,o.Lk)("label",{for:"email-proxy",class:"text-sm text-gray-700 cursor-pointer"},"Apoderados",-1))]),(0,o.Lk)("div",ze,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"PERSONALIZED","onUpdate:modelValue":t[12]||(t[12]=e=>l.form.typeContact.email.range=e),id:"email-personalized",class:"cursor-pointer accent-[#497fae] w-4 h-4"},null,512),[[b.lH,l.form.typeContact.email.range]]),t[33]||(t[33]=(0,o.Lk)("label",{for:"email-personalized",class:"text-sm text-gray-700 cursor-pointer"},"Personalizado",-1))])]),l.form.typeContact.email.range.includes("PERSONALIZED")?((0,o.uX)(),(0,o.CE)("div",Fe,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.form.typeContact.email.items,((e,a)=>((0,o.uX)(),(0,o.CE)("div",{key:a,class:"flex items-center mb-2 space-x-2"},[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"email-input-"+a,"onUpdate:modelValue":e=>l.form.typeContact.email.items[a]=e,class:"flex-grow bg-gray-100 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#497fae] focus:border-#497fae-500 block w-full p-2 shadow-sm transition-all duration-200",placeholder:"sysnet@gmail.com",required:""},null,8,Me),[[b.Jo,l.form.typeContact.email.items[a]]]),(0,o.Lk)("button",{type:"button",onClick:e=>l.removeEmail(a),class:"text-red-600 hover:text-red-800 focus:outline-none focus:ring-2 focus:ring-red-500 rounded transition-all duration-200"},t[34]||(t[34]=[(0,o.Lk)("i",{class:"mdi mdi-trash-can-outline text-lg"},null,-1)]),8,Pe)])))),128)),(0,o.Lk)("button",{type:"button",onClick:t[13]||(t[13]=(...e)=>l.addEmail&&l.addEmail(...e)),class:"mt-3 flex items-center px-2 py-1 bg-[#396895] text-white font-medium text-xs rounded-lg shadow-md hover:bg-[#396895] focus:ring-2 focus:ring-[#497fae] focus:outline-none transition-all duration-200"},t[35]||(t[35]=[(0,o.Lk)("i",{class:"mdi mdi-plus-circle-outline text-sm mr-2"},null,-1),(0,o.eW)(" Agregar Correo ")]))])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),(0,o.Lk)("div",Ke,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"true","onUpdate:modelValue":t[14]||(t[14]=e=>l.form.typeContact.whatsapp.status=e),id:"whatsapp-notification",class:"cursor-pointer accent-#099cb4-500 w-4 h-4"},null,512),[[b.lH,l.form.typeContact.whatsapp.status]]),t[37]||(t[37]=(0,o.Lk)("label",{for:"whatsapp-notification",class:"text-sm text-gray-700 cursor-pointer flex items-center"},[(0,o.Lk)("i",{class:"fa fa-whatsapp text-[#099cb4] mr-2"}),(0,o.eW)(" WhatsApp ")],-1))]),l.form.typeContact.whatsapp.status?((0,o.uX)(),(0,o.CE)("div",qe,[t[42]||(t[42]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-2"},"Seleccionar Destinatarios",-1)),(0,o.Lk)("div",Qe,[(0,o.Lk)("div",Ge,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"PROXY","onUpdate:modelValue":t[15]||(t[15]=e=>l.form.typeContact.whatsapp.range=e),id:"whatsapp-proxy",class:"cursor-pointer accent-#099cb4-500 w-4 h-4"},null,512),[[b.lH,l.form.typeContact.whatsapp.range]]),t[38]||(t[38]=(0,o.Lk)("label",{for:"whatsapp-proxy",class:"text-sm text-gray-700 cursor-pointer"},"Apoderados",-1))]),(0,o.Lk)("div",We,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"PERSONALIZED","onUpdate:modelValue":t[16]||(t[16]=e=>l.form.typeContact.whatsapp.range=e),id:"whatsapp-personalized",class:"cursor-pointer accent-#099cb4-500 w-4 h-4"},null,512),[[b.lH,l.form.typeContact.whatsapp.range]]),t[39]||(t[39]=(0,o.Lk)("label",{for:"whatsapp-personalized",class:"text-sm text-gray-700 cursor-pointer"},"Personalizado",-1))])]),l.form.typeContact.whatsapp.range.includes("PERSONALIZED")?((0,o.uX)(),(0,o.CE)("div",Ze,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.form.typeContact.whatsapp.items,((e,a)=>((0,o.uX)(),(0,o.CE)("div",{key:a,class:"flex items-center mb-2 space-x-2"},[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"phone-input-"+a,"onUpdate:modelValue":e=>l.form.typeContact.whatsapp.items[a]=e,class:"flex-grow bg-gray-100 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#497fae] focus:border-[#497fae] block w-full p-2 shadow-sm transition-all duration-200",placeholder:"929831019",required:""},null,8,je),[[b.Jo,l.form.typeContact.whatsapp.items[a]]]),(0,o.Lk)("button",{type:"button",onClick:e=>l.removeNumber(a),class:"text-red-600 hover:text-red-800 focus:outline-none focus:ring-2 focus:ring-red-500 rounded transition-all duration-200"},t[40]||(t[40]=[(0,o.Lk)("i",{class:"mdi mdi-trash-can-outline text-lg"},null,-1)]),8,He)])))),128)),(0,o.Lk)("button",{type:"button",onClick:t[17]||(t[17]=(...e)=>l.addNumber&&l.addNumber(...e)),class:"mt-3 flex items-center px-2 py-1 bg-[#099cb4] text-white font-medium text-xs rounded-lg shadow-md hover:bg-[#099cb4] focus:ring-2 focus:ring-[#099cb4] focus:outline-none transition-all duration-200"},t[41]||(t[41]=[(0,o.Lk)("i",{class:"mdi mdi-plus-circle-outline text-sm mr-2"},null,-1),(0,o.eW)(" Agregar Teléfono ")]))])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",Ye,[(0,o.Lk)("button",{type:"button",onClick:t[18]||(t[18]=(...e)=>l.closeDialog&&l.closeDialog(...e)),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"}," Cancelar "),t[44]||(t[44]=(0,o.Lk)("button",{type:"submit",class:"px-4 py-2 bg-[#396895] text-white rounded-lg hover:bg-[#396895]"}," Guardar Cambios ",-1))])],32)])])):(0,o.Q3)("",!0)}var et={props:{item:{type:Object,required:!0}},emits:["close","updateItem"],setup(e,{emit:t}){const a=(0,n.KR)({...e.item}),l=(0,n.KR)([]),r=(0,n.KR)([]),s=(0,n.KR)([...e.item.gateways]),i=(0,n.KR)([...e.item.itemsMobiles]),c=(0,n.KR)(""),u=(0,n.KR)(""),d=(0,o.EW)((()=>{const e=c.value.toLowerCase();return r.value.filter((t=>t.name.toLowerCase().includes(e)))})),m=(0,o.EW)((()=>{const e=u.value.toLowerCase();return l.value.filter((t=>t.name.toLowerCase().includes(e)))})),p=()=>{t("close")},f=()=>{t("updateItem",{...a.value,gateways:s.value,itemsMobiles:i.value})},b=async e=>{const t=fe.A.state.token;"LAYOUT"===e&&(l.value=(await(0,ce.bN)(t)).data.data),"AREA"===e&&(l.value=(await(0,ue.ZL)(t)).data.data),"GROUP_AREAS"===e&&(l.value=(await(0,de.ED)(t)).data.data)},y=async e=>{const t=fe.A.state.token;"GROUP_ITEMMOBILE"===e&&(r.value=(await(0,me.dK)(t)).data.data),"TYPE_ITEMMOBILE"===e&&(r.value=(await(0,pe.IE)(t)).data.data)};(0,o.wB)((()=>a.value.typeGateways),b),(0,o.wB)((()=>a.value.typeItemsMobiles),y);const x=()=>a.value.typeContact.email.items.push(""),v=e=>a.value.typeContact.email.items.splice(e,1),k=()=>a.value.typeContact.whatsapp.items.push(""),g=e=>a.value.typeContact.whatsapp.items.splice(e,1);return b(a.value.typeGateways),y(a.value.typeItemsMobiles),{form:a,layouts:l,etiquetas:r,selectedGateways:s,selectTags:i,closeDialog:p,submitForm:f,filteredLayouts:m,addEmail:x,removeEmail:v,addNumber:k,removeNumber:g,filteredEtiquetas:d,searchQuery2:c,searchQuery:u}}};const tt=(0,C.A)(et,[["render",Je]]);var at=tt,ot=a(2729),lt=a(4260),rt=a(9669),st=a(2164),nt=a(6498),it=a(7294),ct=a(8249),ut=a(4750);const dt={class:"flex items-center space-x-4 mb-5"};function mt(e,t,a,l,r,s){return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",dt,[(0,o.bF)(ut.W,{modelValue:l.search,"onUpdate:modelValue":t[0]||(t[0]=e=>l.search=e),label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"",density:"compact"},null,8,["modelValue"]),(0,o.bF)(ct.q,{"open-on-hover":""},{activator:(0,o.k6)((({props:e})=>[(0,o.Lk)("button",(0,o.v6)(e,{class:"flex items-center justify-center bg-[#497fae] text-white font-bold px-4 py-1 rounded-lg hover:bg-[#6999c2] shadow-md text-xl mdi mdi-format-list-bulleted"}),null,16)])),default:(0,o.k6)((()=>[(0,o.bF)(st.x8,null,{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.events,(e=>((0,o.uX)(),(0,o.Wv)(nt.g,{key:e.value,onClick:t=>l.handleEventSelection(e),class:"hover:bg-gray-100 cursor-pointer"},{default:(0,o.k6)((()=>[(0,o.bF)(it.U,{class:(0,y.C4)(["flex items-center",{"text-[#099cb4]":"ACTIVATE"===e.value,"text-[#497fae]":"DEACTIVATE"===e.value,"text-red-600":"DELETE"===e.value}])},{default:(0,o.k6)((()=>[(0,o.bF)(rt.w,{class:(0,y.C4)([{"text-[#099cb4]":"ACTIVATE"===e.value,"text-[#497fae]":"DEACTIVATE"===e.value,"text-red-600":"DELETE"===e.value},"mr-2"])},{default:(0,o.k6)((()=>[(0,o.eW)((0,y.v_)(e.icon),1)])),_:2},1032,["class"]),(0,o.eW)(" "+(0,y.v_)(e.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})]),(0,o.bF)(ot.J,{flat:""},{default:(0,o.k6)((()=>[(0,o.bF)(lt.Py,{headers:l.headers,items:l.filteredItems,search:l.search,"show-select":"","item-value":"_id",modelValue:l.selectedItems,"onUpdate:modelValue":t[1]||(t[1]=e=>l.selectedItems=e),density:"compact",class:"ma-2"},{["item.areas"]:(0,o.k6)((({item:e})=>[(0,o.bF)(rt.w,{small:"",color:"#497fae",onClick:t=>l.viewAntennas(e)},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.eW)(" mdi-eye ")]))),_:2},1032,["onClick"])])),["item.status"]:(0,o.k6)((({item:e})=>[(0,o.bF)(rt.w,{small:"",color:e.status?"#497fae":"grey"},{default:(0,o.k6)((()=>[(0,o.eW)((0,y.v_)(e.status?"mdi-bell-ring":"mdi-bell-off"),1)])),_:2},1032,["color"])])),["item.actions"]:(0,o.k6)((({item:e})=>[(0,o.bF)(rt.w,{small:"",color:"#099cb4",class:"mr-4",onClick:t=>l.editItem(e)},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.eW)(" mdi-pencil ")]))),_:2},1032,["onClick"]),(0,o.bF)(rt.w,{small:"",color:"red",onClick:t=>l.deleteItem(e)},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.eW)(" mdi-delete ")]))),_:2},1032,["onClick"])])),_:2},1032,["headers","items","search","modelValue"])])),_:1})],64)}a(1454),a(7550);var pt=a(4874),ft=a.n(pt),bt={name:"DataTable",props:{items:{type:Array,required:!0}},emits:["deleteItem","editItem","viewAntennas","selectedItemsEvent"],setup(e,{emit:t}){const a=(0,n.KR)(""),l=(0,n.KR)([]),r=(0,n.KR)(null),s=(0,n.KR)([{title:"Activar",value:"ACTIVATE",icon:"mdi-bell-ring"},{title:"Desactivar",value:"DEACTIVATE",icon:"mdi-bell-off"},{title:"Eliminar",value:"DELETE",icon:"mdi-delete"}]),i=(0,n.KR)([{key:"id",title:"ID"},{key:"name",title:"Nombre"},{key:"status",title:"Estado"},{key:"areas",title:"Detalle"},{key:"actions",title:"Acciones",sortable:!1}]),c=(0,o.EW)((()=>{if(!a.value)return u.value;const e=a.value.toLowerCase();return u.value.filter((t=>Object.values(t).some((t=>String(t).toLowerCase().includes(e)))))})),u=(0,o.EW)((()=>e.items.map(((e,t)=>({id:t+1,...e}))))),d=e=>{t("deleteItem",e)},m=e=>{t("editItem",e)},p=e=>{t("viewAntennas",e)},f=e=>{if(0===l.value.length)return void ft().fire({title:"Atención",text:"Por favor, selecciona al menos una notificación para realizar esta acción.",icon:"warning",confirmButtonColor:"#f7a304",confirmButtonText:"Aceptar"});const a=l.value;t("selectedItemsEvent",{action:e.value,ids:a})},b=()=>{l.value=[]};return{search:a,headers:i,filteredItems:c,selectedItems:l,deleteItem:d,editItem:m,viewAntennas:p,handleEventSelection:f,selectedEvent:r,events:s,clearSelection:b}}};const yt=(0,C.A)(bt,[["render",mt],["__scopeId","data-v-b68d2b48"]]);var xt=yt,vt={components:{DataTable:xt,AntennasModal:R,createForm:xe,EditForm:at},setup(){const e=(0,n.KR)(null),t=(0,n.KR)([]),a=(0,n.KR)(null),l=(0,n.KR)(null),r=(0,n.KR)(!1),s=(0,n.KR)(!1),i=(0,n.KR)(!1),c=(0,n.KR)(!1),b=()=>{i.value=!0},y=()=>{i.value=!1},x=()=>{r.value=!0},v=()=>{r.value=!1},k=e=>{a.value=e,s.value=!0},g=()=>{s.value=!1,a.value=null},h=e=>{l.value={...e},c.value=!0},L=()=>{c.value=!1},E=async e=>{x();try{const t=fe.A.state.token,a=e._id;await p(t,e,a),L(),v(),await C(),ft().fire({title:"Éxito",text:"Se actualizó correctamente.",icon:"success",confirmButtonText:"Aceptar"})}catch(t){v();const e=t.response?.data?.message||t.response?.data||"Error al actualizar.";ft().fire({title:"Error",text:e,icon:"error",confirmButtonText:"Aceptar"})}},w=async e=>{try{const t=fe.A.state.token;await m(t,e),await C(),y(),ft().fire({title:"Éxito",text:"Se creó correctamente.",icon:"success",confirmButtonText:"Aceptar"})}catch(t){y();const e=t.response?.data?.message||t.response?.data||"Error al crear la regla.";ft().fire({title:"Error",text:e,icon:"error",confirmButtonText:"Aceptar"})}},A=async e=>{const t=await ft().fire({title:"¿Estás seguro?",text:"No podrás revertir esto.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#f7a304",cancelButtonColor:"#deddda",cancelButtonText:"Cancelar",confirmButtonText:"Sí, eliminar",reverseButtons:!0});if(t.isConfirmed){x();try{const t=fe.A.state.token,a=e._id;await d(t,a),v(),await C(),ft().fire({title:"Éxito",text:"Se eliminó correctamente.",icon:"success",confirmButtonText:"Aceptar"})}catch(a){v();const e=a.response?.data?.message||a.response?.data||"Error al eliminar.";ft().fire({title:"Error",text:e,icon:"error",confirmButtonText:"Aceptar"})}}},C=async()=>{x();try{const e=fe.A.state.token,a=await u(e);t.value=a.data.data,a&&v()}catch(e){v(),console.error("Error al obtener las rutas:",e)}},I=async t=>{const a=fe.A.state.token,o={alertRuleIds:t.ids,type:t.action};try{if("DELETE"===t.action){const e=await ft().fire({title:"¿Estás seguro?",text:"Esta acción eliminará las reglas seleccionadas. ¡No podrás revertirlo!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#f7a304",cancelButtonColor:"#deddda",cancelButtonText:"Cancelar",confirmButtonText:"Sí, eliminar",reverseButtons:!0});if(e.isConfirmed){const e=await f(a,o);e&&(await C(),ft().fire({title:"Éxito",text:"Se eliminó correctamente.",icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#f7a304"}))}}else if("ACTIVATE"===t.action||"DEACTIVATE"===t.action){const e=await f(a,o);if(e){await C();const e="ACTIVATE"===t.action?"activadas":"desactivadas";ft().fire({title:"¡Éxito!",text:`Las reglas se han ${e} correctamente.`,icon:"success",confirmButtonColor:"#f7a304"})}}e.value&&e.value.clearSelection&&e.value.clearSelection()}catch(l){console.error("Error al realizar la acción:",l),ft().fire("Error","Ocurrió un problema al realizar la acción. Por favor, inténtalo de nuevo.","error")}};return(0,o.sV)(C),{items:t,fetchItems:C,openLoading:x,closeLoading:v,isLoading:r,listAntennas:k,closeAntennaModal:g,deleteItems:A,isCreateFormVisible:i,openCreateForm:b,closeCreateForm:y,submitItems:w,updateItems:E,openEditForm:h,closeEditForm:L,isEditFormVisible:c,selectedItem:l,isAntennasModalVisible:s,selectedAntennas:a,massiveUpdate:I,dataTableRef:e}}};const kt=(0,C.A)(vt,[["render",s]]);var gt=kt}}]);
//# sourceMappingURL=271.4affa2ef.js.map