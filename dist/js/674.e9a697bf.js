"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[674],{8674:function(e,t,r){r.r(t),r.d(t,{default:function(){return Z}});var a=r(6768);const s={class:"flex justify-between items-center"},o={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75 z-[9999]"};function i(e,t,r,i,l,n){const d=(0,a.g2)("formTable"),c=(0,a.g2)("createForm"),m=(0,a.g2)("EditForm");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",null,[(0,a.Lk)("div",s,[t[1]||(t[1]=(0,a.Lk)("h1",{class:"font-bold lg:text-2xl text-xl text-gray-500 mb-5"}," Compañias",-1)),(0,a.Lk)("button",{class:"flex items-center justify-center bg-[#497fae] text-white font-bold px-4 py-1 rounded-lg hover:bg-[#6999c2] shadow-md mdi mdi-plus text-xl",onClick:t[0]||(t[0]=(...e)=>i.openCreateForm&&i.openCreateForm(...e))})]),(0,a.bF)(d,{items:i.items,onViewAreas:i.listAreas,onDeleteItem:i.deleteItems,onEditItem:i.openEditForm},null,8,["items","onViewAreas","onDeleteItem","onEditItem"]),i.isCreateFormVisible?((0,a.uX)(),(0,a.Wv)(c,{key:0,onClose:i.closeCreateForm,onItemCreate:i.submitItems},null,8,["onClose","onItemCreate"])):(0,a.Q3)("",!0),i.isEditFormVisible?((0,a.uX)(),(0,a.Wv)(m,{key:1,item:i.selectedItem,onClose:i.closeEditForm,onUpdateItem:i.updateItems},null,8,["item","onClose","onUpdateItem"])):(0,a.Q3)("",!0)]),i.isLoading?((0,a.uX)(),(0,a.CE)("div",o,t[2]||(t[2]=[(0,a.Lk)("div",{class:"flex flex-col items-center space-y-4"},[(0,a.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white"}),(0,a.Lk)("p",{class:"text-white text-lg font-semibold"},"Cargando, por favor espera...")],-1)]))):(0,a.Q3)("",!0)],64)}var l=r(144),n=r(1189);const d="https://api.bwasi.maquiadev.com/api/v1";function c(e){return n.A.get(`${d}/companies`,{headers:{Authorization:`Bearer ${e}`}})}function m(e,t){return n.A.delete(`${d}/companies/${t}`,{headers:{Authorization:`Bearer ${e}`}})}function u(e,t){return n.A.post(`${d}/companies`,t,{headers:{Authorization:`Bearer ${e}`}})}function b(e,t,r){return n.A.patch(`${d}/companies/${r}`,t,{headers:{Authorization:`Bearer ${e}`}})}var f=r(2729),p=r(4260),g=r(9669),y=r(4750);function x(e,t,r,s,o,i){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(y.W,{modelValue:s.search,"onUpdate:modelValue":t[0]||(t[0]=e=>s.search=e),label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",class:"mb-5 PT-3"},null,8,["modelValue"]),(0,a.bF)(f.J,{flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(p.Py,{headers:s.headers,items:s.filteredItems,search:s.search,density:"compact",class:"ma-2"},{["item.actions"]:(0,a.k6)((({item:e})=>[(0,a.bF)(g.w,{small:"",color:"#099cb4",class:"mr-4",onClick:t=>s.editItem(e)},{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.eW)(" mdi-pencil ")]))),_:2},1032,["onClick"]),(0,a.bF)(g.w,{small:"",color:"red",onClick:t=>s.deleteItem(e)},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.eW)(" mdi-delete ")]))),_:2},1032,["onClick"])])),_:2},1032,["headers","items","search"])])),_:1})],64)}r(8992),r(4520),r(1454),r(7550);var k={name:"DataTable",props:{items:{type:Array,required:!0}},emits:["deleteItem","editItem","viewAreas"],setup(e,{emit:t}){const r=(0,l.KR)(""),s=(0,l.KR)([{key:"id",title:"ID"},{key:"user.username",title:"Usuario"},{key:"name",title:"Nombre"},{key:"businessName",title:"Razón social"},{key:"actions",title:"Acciones",sortable:!1}]),o=(0,a.EW)((()=>{if(!r.value)return i.value;const e=r.value.toLowerCase();return i.value.filter((t=>Object.values(t).some((t=>String(t).toLowerCase().includes(e)))))})),i=(0,a.EW)((()=>e.items.map(((e,t)=>({id:t+1,...e}))))),n=e=>{t("deleteItem",e)},d=e=>{t("editItem",e)},c=e=>{t("viewAreas",e)};return{search:r,headers:s,filteredItems:o,deleteItem:n,editItem:d,viewAreas:c}}},v=r(1241);const w=(0,v.A)(k,[["render",x],["__scopeId","data-v-e9450dd8"]]);var h=w,L=r(5130);const C={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-[9999]"},I={class:"bg-white rounded-lg shadow-lg max-w-md w-full p-6"},A={class:"mb-4"},F={class:"mb-4"},E={class:"mb-4"},V={class:"mb-4"},B={class:"flex justify-end space-x-2"};function U(e,t,r,s,o,i){return s.item?((0,a.uX)(),(0,a.CE)("div",C,[(0,a.Lk)("div",I,[t[11]||(t[11]=(0,a.Lk)("h2",{class:"text-xl font-semibold text-gray-700 mb-4 text-center"},"Crear Nueva Compañia",-1)),(0,a.Lk)("form",{onSubmit:t[5]||(t[5]=(0,L.D$)(((...e)=>s.submitForm&&s.submitForm(...e)),["prevent"]))},[(0,a.Lk)("div",A,[t[6]||(t[6]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.form.name=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[L.Jo,s.form.name]])]),(0,a.Lk)("div",F,[t[7]||(t[7]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Razón social",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.form.businessName=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[L.Jo,s.form.businessName]])]),(0,a.Lk)("div",E,[t[8]||(t[8]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre de Usuario",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>s.form.username=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[L.Jo,s.form.username]])]),(0,a.Lk)("div",V,[t[9]||(t[9]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Contraseña",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password","onUpdate:modelValue":t[3]||(t[3]=e=>s.form.password=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[L.Jo,s.form.password]])]),(0,a.Lk)("div",B,[(0,a.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>s.closeDialog&&s.closeDialog(...e)),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"}," Cancelar "),t[10]||(t[10]=(0,a.Lk)("button",{type:"submit",class:"px-4 py-2 bg-[#396895] text-white rounded-lg hover:bg-[#396895]"}," Guardar ",-1))])],32)])])):(0,a.Q3)("",!0)}var R={emits:["close","ItemCreate"],setup(e,{emit:t}){const r=(0,l.KR)(!0),a=(0,l.KR)({name:"",businessName:"",username:"",password:""}),s=()=>{t("close")},o=async()=>{t("ItemCreate",a.value)};return{item:r,form:a,closeDialog:s,submitForm:o}}};const K=(0,v.A)(R,[["render",U]]);var N=K;const T={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-[9999]"},$={class:"bg-white rounded-lg shadow-lg max-w-md w-full p-6"},z={class:"mb-4"},_={class:"mb-4"},q={class:"mb-4"},j={class:"mb-4 relative"},D={class:"flex"},W=["type"],X={class:"flex justify-end space-x-2"};function J(e,t,r,s,o,i){return r.item?((0,a.uX)(),(0,a.CE)("div",T,[(0,a.Lk)("div",$,[t[12]||(t[12]=(0,a.Lk)("h2",{class:"text-lg font-semibold text-gray-700 mb-4 text-center"},"Editar Compañia",-1)),(0,a.Lk)("form",{onSubmit:t[6]||(t[6]=(0,L.D$)(((...e)=>s.submitUpdate&&s.submitUpdate(...e)),["prevent"]))},[(0,a.Lk)("div",z,[t[7]||(t[7]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.editedItem.name=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[L.Jo,s.editedItem.name]])]),(0,a.Lk)("div",_,[t[8]||(t[8]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Razón social",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.editedItem.businessName=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[L.Jo,s.editedItem.businessName]])]),(0,a.Lk)("div",q,[t[9]||(t[9]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre de Usuario",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>s.editedItem.user.username=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[L.Jo,s.editedItem.user.username]])]),(0,a.Lk)("div",j,[t[10]||(t[10]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Contraseña",-1)),(0,a.Lk)("div",D,[(0,a.bo)((0,a.Lk)("input",{type:s.showPassword?"text":"password","onUpdate:modelValue":t[3]||(t[3]=e=>s.editedItem.user.password=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,8,W),[[L.hp,s.editedItem.user.password]]),(0,a.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>s.togglePasswordVisibility&&s.togglePasswordVisibility(...e)),class:"ml-2 flex items-center text-gray-500 hover:text-gray-700"},[s.showPassword?((0,a.uX)(),(0,a.Wv)(g.w,{key:1,class:"mdi mdi-eye"})):((0,a.uX)(),(0,a.Wv)(g.w,{key:0,class:"mdi mdi-eye-off"}))])])]),(0,a.Lk)("div",X,[(0,a.Lk)("button",{type:"button",onClick:t[5]||(t[5]=t=>e.$emit("close")),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"}," Cancelar "),t[11]||(t[11]=(0,a.Lk)("button",{type:"submit",class:"px-4 py-2 bg-[#396895] text-white rounded-lg hover:bg-[#396895]"}," Guardar Cambios ",-1))])],32)])])):(0,a.Q3)("",!0)}var P={props:{item:{type:Object,required:!0}},emits:["close","updateItem"],setup(e,{emit:t}){const r=(0,l.KR)({...e.item}),s=(0,l.KR)(!1);(0,a.wB)((()=>e.item),(e=>{r.value={...e}}));const o=()=>{s.value=!s.value},i=()=>{t("updateItem",r.value)};return{editedItem:r,showPassword:s,togglePasswordVisibility:o,submitUpdate:i}}};const S=(0,v.A)(P,[["render",J]]);var Q=S,G=r(5129),M=r(4874),O=r.n(M),H={components:{formTable:h,createForm:N,EditForm:Q},setup(){const e=(0,l.KR)([]),t=(0,l.KR)(null),r=(0,l.KR)(null),s=(0,l.KR)(!1),o=(0,l.KR)(!1),i=(0,l.KR)(!1),n=(0,l.KR)(!1),d=()=>{i.value=!0},f=()=>{i.value=!1},p=()=>{s.value=!0},g=()=>{s.value=!1},y=e=>{t.value=e,o.value=!0},x=()=>{o.value=!1,t.value=null},k=e=>{r.value={...e},n.value=!0},v=()=>{n.value=!1},w=async e=>{p();try{const t=G.A.state.token,r=e._id,a={name:e.name};await b(t,a,r),v(),g(),await C(),O().fire({title:"Éxito",text:"Se actualizó correctamente.",icon:"success",confirmButtonText:"Aceptar"})}catch(t){g();const e=t.response?.data?.message||t.response?.data||"Error al actualizar.";O().fire({title:"Error",text:e,icon:"error",confirmButtonText:"Aceptar"})}},h=async e=>{try{const t=G.A.state.token;await u(t,e),await C(),f(),O().fire({title:"Éxito",text:"Se creó correctamente.",icon:"success",confirmButtonText:"Aceptar"})}catch(t){const e=t.response?.data?.message||t.response?.data||"Error al crear.";O().fire({title:"Error",text:e,icon:"error",confirmButtonText:"Aceptar"})}},L=async e=>{const t=await O().fire({title:"¿Estás seguro?",text:"No podrás revertir esto.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#f7a304",cancelButtonColor:"#deddda",cancelButtonText:"Cancelar",confirmButtonText:"Sí, eliminar",reverseButtons:!0});if(t.isConfirmed){p();try{const t=G.A.state.token,r=e._id;await m(t,r),g(),await C(),O().fire({title:"Éxito",text:"Se eliminó correctamente.",icon:"success",confirmButtonText:"Aceptar"})}catch(r){g();const e=r.response?.data?.message||r.response?.data||"Error al eliminar.";O().fire({title:"Error",text:e,icon:"error",confirmButtonText:"Aceptar"})}}},C=async()=>{p();try{const t=G.A.state.token,r=await c(t);e.value=r.data.data,g()}catch(t){g();const e=t.response?.data?.message||t.response?.data||"Error al obtener los operadores.";O().fire({title:"Error",text:e,icon:"error",confirmButtonText:"Aceptar"})}};return(0,a.sV)(C),{items:e,fetchItems:C,openLoading:p,closeLoading:g,isLoading:s,listAreas:y,closeAreasModal:x,selectedAreas:t,isAreasModalVisible:o,deleteItems:L,isCreateFormVisible:i,openCreateForm:d,closeCreateForm:f,submitItems:h,updateItems:w,openEditForm:k,closeEditForm:v,isEditFormVisible:n,selectedItem:r}}};const Y=(0,v.A)(H,[["render",i]]);var Z=Y}}]);
//# sourceMappingURL=674.e9a697bf.js.map