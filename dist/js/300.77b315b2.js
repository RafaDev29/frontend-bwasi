"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[300],{9509:function(e,t,a){a.d(t,{IO:function(){return c},a$:function(){return l},bN:function(){return o},hO:function(){return n},uq:function(){return i}});var r=a(1189);const s={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_BASE_URL;function o(e){return r.A.get(`${s}/layouts`,{headers:{Authorization:`Bearer ${e}`}})}function i(e,t){return r.A.delete(`${s}/layouts/${t}`,{headers:{Authorization:`Bearer ${e}`}})}function n(e,t){return r.A.post(`${s}/layouts`,t,{headers:{Authorization:`Bearer ${e}`}})}function l(e,t,a){return r.A.patch(`${s}/layouts/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}function c(e,t,a){return r.A.post(`${s}/layouts/updatebackgroundImage/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}},8300:function(e,t,a){a.r(t),a.d(t,{default:function(){return ae}});var r=a(6768),s=a(4232);const o={class:"flex justify-between items-center"},i={class:"font-bold lg:text-2xl text-xl text-gray-500 mb-5"},n={key:3,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75 z-[9999]"};function l(e,t,a,l,c,m){const d=(0,r.g2)("formTable"),u=(0,r.g2)("AreasModal"),b=(0,r.g2)("createForm"),f=(0,r.g2)("EditForm");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",o,[(0,r.Lk)("h1",i,(0,s.v_)(l.NameLayout),1),(0,r.Lk)("button",{class:"flex items-center justify-center bg-[#497fae] text-white font-bold px-4 py-1 rounded-lg hover:bg-[#6999c2] shadow-md mdi mdi-plus text-xl",onClick:t[0]||(t[0]=(...e)=>l.openCreateForm&&l.openCreateForm(...e))})]),(0,r.bF)(d,{items:l.items,onViewAreas:l.listAreas,onDeleteItem:l.deleteItems,onEditItem:l.openEditForm},null,8,["items","onViewAreas","onDeleteItem","onEditItem"]),l.isAreasModalVisible?((0,r.uX)(),(0,r.Wv)(u,{key:0,areas:l.selectedAreas,onClose:l.closeAreasModal,isVisible:l.isAreasModalVisible},null,8,["areas","onClose","isVisible"])):(0,r.Q3)("",!0),l.isCreateFormVisible?((0,r.uX)(),(0,r.Wv)(b,{key:1,onClose:l.closeCreateForm,onItemCreate:l.submitItems},null,8,["onClose","onItemCreate"])):(0,r.Q3)("",!0),l.isEditFormVisible?((0,r.uX)(),(0,r.Wv)(f,{key:2,item:l.selectedItem,onClose:l.closeEditForm,onUpdateItem:l.updateItems},null,8,["item","onClose","onUpdateItem"])):(0,r.Q3)("",!0),l.isLoading?((0,r.uX)(),(0,r.CE)("div",n,t[1]||(t[1]=[(0,r.Lk)("div",{class:"flex flex-col items-center space-y-4"},[(0,r.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white"}),(0,r.Lk)("p",{class:"text-white text-lg font-semibold"},"Cargando, por favor espera...")],-1)]))):(0,r.Q3)("",!0)],64)}var c=a(144),m=a(9509),d=a(2729),u=a(4260),b=a(9669),f=a(4750);function p(e,t,a,s,o,i){return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(f.W,{modelValue:s.search,"onUpdate:modelValue":t[0]||(t[0]=e=>s.search=e),label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",class:"mb-5 PT-3",density:"compact"},null,8,["modelValue"]),(0,r.bF)(d.J,{flat:""},{default:(0,r.k6)((()=>[(0,r.bF)(u.Py,{headers:s.headers,items:s.filteredItems,search:s.search,density:"compact",class:"ma-2"},{["item.areas"]:(0,r.k6)((({item:e})=>[(0,r.bF)(b.w,{small:"",color:"#497fae",onClick:t=>s.viewAreas(e.areas)},{default:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.eW)(" mdi-eye ")]))),_:2},1032,["onClick"])])),["item.actions"]:(0,r.k6)((({item:e})=>[(0,r.bF)(b.w,{small:"",color:"#099cb4",class:"mr-4",onClick:t=>s.editItem(e)},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.eW)(" mdi-pencil ")]))),_:2},1032,["onClick"]),(0,r.bF)(b.w,{small:"",color:"red",onClick:t=>s.deleteItem(e)},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)(" mdi-delete ")]))),_:2},1032,["onClick"])])),_:2},1032,["headers","items","search"])])),_:1})],64)}a(8992),a(4520),a(1454),a(7550);var g=a(5129),y={name:"DataTable",props:{items:{type:Array,required:!0}},emits:["deleteItem","editItem","viewAreas"],setup(e,{emit:t}){const a=(0,c.KR)(""),s=(0,c.KR)([{key:"id",title:"ID"},{key:"name",title:"Nombre"},{key:"areas",title:"Areas"},{key:"actions",title:"Acciones",sortable:!1}]),o=(0,r.EW)((()=>g.A.getters.getItemName("Áreas"))),i=(0,r.EW)((()=>s.value.map((e=>"areas"===e.key?{...e,title:o.value}:e)))),n=(0,r.EW)((()=>{if(!a.value)return l.value;const e=a.value.toLowerCase();return l.value.filter((t=>Object.values(t).some((t=>String(t).toLowerCase().includes(e)))))})),l=(0,r.EW)((()=>e.items.map(((e,t)=>({id:t+1,...e}))))),m=e=>{t("deleteItem",e)},d=e=>{t("editItem",e)},u=e=>{t("viewAreas",e)};return{search:a,filteredItems:n,deleteItem:m,editItem:d,viewAreas:u,headers:i}}},x=a(1241);const v=(0,x.A)(y,[["render",p],["__scopeId","data-v-40b9022a"]]);var k=v;const h={class:"overflow-y-auto bg-white rounded-lg shadow-lg max-w-md w-full p-0",style:{"max-height":"80vh","margin-bottom":"1rem"}},A={class:"flex justify-between items-center p-2 border-b bg-[#396895] text-white rounded-t-lg"},w={class:"text-xl flex items-center"},L={class:"p-4"},C={class:"divide-y divide-gray-300"},I={class:"flex-1"},E={class:"font-semibold text-gray-800"},F={class:"flex justify-end p-4 border-t bg-gray-100 rounded-b-lg"};function _(e,t,a,o,i,n){return a.isVisible?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-[9999]",onClick:t[1]||(t[1]=(...e)=>o.closeModal&&o.closeModal(...e))},[(0,r.Lk)("div",h,[(0,r.Lk)("div",A,[(0,r.Lk)("h1",w,[t[2]||(t[2]=(0,r.Lk)("i",{class:"mdi mdi-map-marker text-white text-3xl ml-2"},null,-1)),(0,r.eW)(" "+(0,s.v_)(o.NameArea),1)])]),(0,r.Lk)("div",L,[(0,r.Lk)("ul",C,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.areas,((e,t)=>((0,r.uX)(),(0,r.CE)("li",{key:t,class:"py-4 flex items-center space-x-4"},[(0,r.Lk)("div",I,[(0,r.Lk)("p",E,(0,s.v_)(e.name),1)])])))),128))])]),(0,r.Lk)("div",F,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.closeModal&&o.closeModal(...e)),class:"px-4 py-2 text-sm font-medium text-white bg-[#396895] rounded-lg hover:bg-[#396895] transition"}," Cerrar ")])])])):(0,r.Q3)("",!0)}var B={name:"ViewAreas",props:{areas:{type:Array,required:!0},isVisible:{type:Boolean,required:!0}},emits:["close"],setup(e,{emit:t}){const a=g.A.getters.getItemName("Áreas"),r=async()=>{t("close")};return{closeModal:r,NameArea:a}}};const N=(0,x.A)(B,[["render",_],["__scopeId","data-v-7ecd74b0"]]);var V=N,$=a(5130);const K={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-[9999]"},R={class:"bg-white rounded-lg shadow-lg max-w-md w-full p-6"},T={class:"text-xl font-semibold text-gray-700 mb-4 text-center"},j={class:"mb-4"},M={class:"flex justify-end space-x-2"};function W(e,t,a,o,i,n){return o.item?((0,r.uX)(),(0,r.CE)("div",K,[(0,r.Lk)("div",R,[(0,r.Lk)("h2",T,"Nuevo "+(0,s.v_)(o.NameLayout),1),(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,$.D$)(((...e)=>o.submitForm&&o.submitForm(...e)),["prevent"]))},[(0,r.Lk)("div",j,[t[3]||(t[3]=(0,r.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.form.name=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[$.Jo,o.form.name]])]),(0,r.Lk)("div",M,[(0,r.Lk)("button",{type:"button",onClick:t[1]||(t[1]=(...e)=>o.closeDialog&&o.closeDialog(...e)),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"}," Cancelar "),t[4]||(t[4]=(0,r.Lk)("button",{type:"submit",class:"px-4 py-2 bg-[#396895] text-white rounded-lg hover:bg-[#396895]"}," Guardar ",-1))])],32)])])):(0,r.Q3)("",!0)}var z={emits:["close","ItemCreate"],setup(e,{emit:t}){const a=g.A.getters.getItemName("Layouts"),r=(0,c.KR)(!0),s=(0,c.KR)({name:""}),o=()=>{t("close")},i=async()=>{t("ItemCreate",s.value)};return{item:r,form:s,closeDialog:o,submitForm:i,NameLayout:a}}};const U=(0,x.A)(z,[["render",W]]);var X=U;const D={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-[9999]"},S={class:"bg-white rounded-lg shadow-lg max-w-md w-full p-6"},q={class:"text-lg font-semibold text-gray-700 mb-4 text-center"},Q={class:"mb-4"},O={class:"flex justify-end space-x-2"};function P(e,t,a,o,i,n){return a.item?((0,r.uX)(),(0,r.CE)("div",D,[(0,r.Lk)("div",S,[(0,r.Lk)("h2",q,"Editar "+(0,s.v_)(o.NameLayout),1),(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,$.D$)(((...e)=>o.submitUpdate&&o.submitUpdate(...e)),["prevent"]))},[(0,r.Lk)("div",Q,[t[3]||(t[3]=(0,r.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.editedItem.name=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[$.Jo,o.editedItem.name]])]),(0,r.Lk)("div",O,[(0,r.Lk)("button",{type:"button",onClick:t[1]||(t[1]=t=>e.$emit("close")),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"}," Cancelar "),t[4]||(t[4]=(0,r.Lk)("button",{type:"submit",class:"px-4 py-2 bg-[#396895] text-white rounded-lg hover:bg-[#396895]"}," Guardar Cambios ",-1))])],32)])])):(0,r.Q3)("",!0)}var J={props:{item:{type:Object,required:!0}},emits:["close","updateItem"],setup(e,{emit:t}){const a=g.A.getters.getItemName("Layouts"),s=(0,c.KR)({...e.item});(0,r.wB)((()=>e.item),(e=>{s.value={...e}}));const o=()=>{t("updateItem",s.value)};return{editedItem:s,submitUpdate:o,NameLayout:a}}};const G=(0,x.A)(J,[["render",P]]);var H=G,Y=a(4874),Z=a.n(Y),ee={components:{formTable:k,AreasModal:V,createForm:X,EditForm:H},setup(){const e=g.A.getters.getItemName("Layouts"),t=(0,c.KR)([]),a=(0,c.KR)(null),s=(0,c.KR)(null),o=(0,c.KR)(!1),i=(0,c.KR)(!1),n=(0,c.KR)(!1),l=(0,c.KR)(!1),d=()=>{n.value=!0},u=()=>{n.value=!1},b=()=>{o.value=!0},f=()=>{o.value=!1},p=e=>{a.value=e,i.value=!0},y=()=>{i.value=!1,a.value=null},x=e=>{s.value={...e},l.value=!0},v=()=>{l.value=!1},k=async e=>{b();try{const t=g.A.state.token,a=e._id,r={name:e.name};await(0,m.a$)(t,r,a),v(),f(),await w(),Z().fire({title:"Éxito",text:"Se actualizó correctamente.",icon:"success",confirmButtonText:"Aceptar"})}catch(t){f();const e=t.response?.data?.message||t.response?.data||"Error al actualizar.";Z().fire({title:"Error",text:e,icon:"error",confirmButtonText:"Aceptar"})}},h=async e=>{try{const t=g.A.state.token,a={name:e.name};await(0,m.hO)(t,a),await w(),u(),Z().fire({title:"Éxito",text:"Se creó correctamente.",icon:"success",confirmButtonText:"Aceptar"})}catch(t){const e=t.response?.data?.message||t.response?.data||"Error al crear.";Z().fire({title:"Error",text:e,icon:"error",confirmButtonText:"Aceptar"})}},A=async e=>{const t=await Z().fire({title:"¿Estás seguro?",text:"No podrás revertir esto.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#f7a304",cancelButtonColor:"#deddda",cancelButtonText:"Cancelar",confirmButtonText:"Sí, eliminar",reverseButtons:!0});if(t.isConfirmed){b();try{const t=g.A.state.token,a=e._id;await(0,m.uq)(t,a),f(),await w(),Z().fire({title:"Éxito",text:"Se eliminó correctamente.",icon:"success",confirmButtonText:"Aceptar"})}catch(a){f();const e=a.response?.data?.message||a.response?.data||"Error al eliminar.";Z().fire({title:"Error",text:e,icon:"error",confirmButtonText:"Aceptar"})}}},w=async()=>{b();try{const e=g.A.state.token,a=await(0,m.bN)(e);t.value=a.data.data,f()}catch(e){f();const t=e.response?.data?.message||e.response?.data||"Error al obtener los datos.";Z().fire({title:"Error",text:t,icon:"error",confirmButtonText:"Aceptar"})}};return(0,r.sV)(w),{items:t,fetchItems:w,openLoading:b,closeLoading:f,isLoading:o,listAreas:p,closeAreasModal:y,selectedAreas:a,isAreasModalVisible:i,deleteItems:A,isCreateFormVisible:n,openCreateForm:d,closeCreateForm:u,submitItems:h,updateItems:k,openEditForm:x,closeEditForm:v,isEditFormVisible:l,selectedItem:s,NameLayout:e}}};const te=(0,x.A)(ee,[["render",l]]);var ae=te}}]);
//# sourceMappingURL=300.77b315b2.js.map