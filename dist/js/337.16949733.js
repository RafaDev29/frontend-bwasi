"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[337],{7370:function(e,t,r){r.d(t,{L:function(){return s},R:function(){return a}});var n=r(1189);const o={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_BASE_URL;function a(e){return n.A.get(`${o}/menu-navigation`,{headers:{Authorization:`Bearer ${e}`}})}function s(e,t){return n.A.patch(`${o}/menu-navigation`,t,{headers:{Authorization:`Bearer ${e}`}})}},8502:function(e,t,r){r.r(t),r.d(t,{default:function(){return q}});var n=r(6768);const o={class:"containerlogin flex h-screen"},a={class:"form-wrapper relative w-full lg:w-3/10 h-full p-4 bg-white text-black shadow-lg"},s={class:"formLogin h-full flex flex-col justify-center"},i={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75 z-[9999]"};function l(e,t,r,l,c,d){const u=(0,n.g2)("FormAuthVue");return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("div",a,[(0,n.Lk)("div",s,[(0,n.bF)(u,{onValidateLogin:l.onValidateLogin},null,8,["onValidateLogin"])])]),t[1]||(t[1]=(0,n.Lk)("div",{class:"image-background w-7/10 hidden lg:block"},null,-1)),l.isLoading?((0,n.uX)(),(0,n.CE)("div",i,t[0]||(t[0]=[(0,n.Lk)("div",{class:"flex flex-col items-center space-y-4"},[(0,n.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white"}),(0,n.Lk)("p",{class:"text-white text-lg font-semibold"},"Cargando, por favor espera...")],-1)]))):(0,n.Q3)("",!0)])}r(4114);var c=r(144),d=r(1387),u=r(5130),m=r(554),f=r(9262),p=r(3651),g=r(1950),v=r(4587),b=r(1247),h=r(4600);const w=(0,v.j)({...(0,f.u)(),...(0,p.pE)()},"VForm"),L=(0,b.RW)()({name:"VForm",props:w(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:r,emit:o}=t;const a=(0,p.DG)(e),s=(0,c.KR)();function i(e){e.preventDefault(),a.reset()}function l(e){const t=e,r=a.validate();t.then=r.then.bind(r),t.catch=r.catch.bind(r),t.finally=r.finally.bind(r),o("submit",t),t.defaultPrevented||r.then((e=>{let{valid:t}=e;t&&s.value?.submit()})),t.preventDefault()}return(0,h.C)((()=>(0,n.bF)("form",{ref:s,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:i,onSubmit:l},[r.default?.(a)]))),(0,g.O)(a,s)}});var x=r(4750);const k={class:"flex items-center justify-center min-h-screen bg-[#ffffff] p-4"},y={class:"w-full max-w-md bg-transparent shadow-none p-6"},A={class:"flex justify-center mb-4"},E=["src"];function V(e,t,r,o,a,s){return(0,n.uX)(),(0,n.CE)("div",k,[(0,n.Lk)("div",y,[(0,n.Lk)("div",A,[(0,n.Lk)("img",{src:a.LogoImage,alt:"Logo",class:"w-20 h-20"},null,8,E)]),t[3]||(t[3]=(0,n.Lk)("h1",{class:"text-lg text-[#6999c2] text-center mb-4 font-bold"},"Bienvenido de nuevo a eBeacons!!",-1)),t[4]||(t[4]=(0,n.Lk)("p",{class:"text-xs text-gray-900 text-center mb-4"}," Ingresa sus credenciales ",-1)),(0,n.bF)(L,{onSubmit:(0,u.D$)(o.validateLogin,["prevent"])},{default:(0,n.k6)((()=>[(0,n.bF)(x.W,{modelValue:o.username,"onUpdate:modelValue":t[0]||(t[0]=e=>o.username=e),label:"Usuario","prepend-inner-icon":"mdi-account-outline",variant:"outlined",color:"#0571ec",class:"text-black w-full mb-4"},null,8,["modelValue"]),(0,n.bF)(x.W,{modelValue:o.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),label:"Contraseña","append-inner-icon":o.showPassword?"mdi-eye-off":"mdi-eye",type:o.showPassword?"text":"password","prepend-inner-icon":"mdi-lock-outline",variant:"outlined",color:"#0571ec",class:"text-black w-full mb-4","onClick:appendInner":o.togglePasswordVisibility},null,8,["modelValue","append-inner-icon","type","onClick:appendInner"]),(0,n.bF)(m.D,{type:"submit",color:"#6999c2",class:"w-full mt-4 font-bold"},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)("Ingresar")]))),_:1})])),_:1},8,["onSubmit"]),t[5]||(t[5]=(0,n.Lk)("div",{class:"mt-8 text-gray-400 text-sm text-center"},[(0,n.Lk)("p",{class:"font-semibold"}," Presencia en tiempo real, "),(0,n.Lk)("p",null," decisiones al instante. ")],-1))])])}var _=r.p+"img/logo_sysnet.a54a9cf0.png",R={data(){return{LogoImage:_}},emits:["validate-login"],setup(e,{emit:t}){const r=(0,c.KR)(""),n=(0,c.KR)(""),o=(0,c.KR)(!1),a=()=>{const e={username:r.value,password:n.value};t("validate-login",e)},s=()=>{o.value=!o.value};return{username:r,password:n,validateLogin:a,togglePasswordVisibility:s,showPassword:o}}},C=r(1241);const P=(0,C.A)(R,[["render",V],["__scopeId","data-v-1fdcea45"]]);var U=P,F=r(1189);const I={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_BASE_URL;function S(e){return F.A.post(`${I}/auth/login`,e)}var B=r(7370),D=r(5129),K=r(4874),N=r.n(K),$={components:{FormAuthVue:U},setup(){const e=(0,c.KR)(!1),t=(0,c.KR)(""),r=(0,c.KR)(!1),o=(0,d.rd)(),a=(0,d.lq)(),s=()=>{e.value=!0},i=()=>{e.value=!1},l=async e=>{try{const t=await(0,B.R)(e);t.status&&Array.isArray(t.data.data)?D.A.commit("setMenuData",t.data.data):console.error("La respuesta del menú no es válida:",t)}catch(t){console.error("Error al obtener el menú:",t),N().fire({icon:"error",title:"Error al cargar el menú",text:"No se pudo obtener la configuración del menú de navegación."})}},u=async e=>{try{s();const t=await S(e),r=t.data.data,n=r.token;D.A.commit("setUsername",r.username),D.A.commit("setToken",n),D.A.commit("setRole",r.role),D.A.commit("setLogo",r.logoName),D.A.commit("setIsAuthenticated",!0),D.A.commit("setCustomerid",r.customerId),"CUSTOMER_MASTER"===D.A.state.role&&await l(n),i(),o.push("/")}catch(t){console.error("Error en el proceso de inicio de sesión:",t),i(),t.response?401===t.response.status?N().fire({icon:"error",title:"Credenciales inválidas",text:"Las credenciales de usuario no son válidas"}):500===t.response.status?N().fire({icon:"error",title:"Error del servidor",text:"Error 500: Error interno del servidor"}):N().fire({icon:"error",title:"Error",text:t.response.data.message}):t.request?N().fire({icon:"error",title:"Sin respuesta",text:"No se recibió respuesta del servidor"}):N().fire({icon:"error",title:"Error de solicitud",text:"Error al configurar la solicitud: "+t.message})}};return(0,n.sV)((()=>{const e=a.query.username,t=a.query.password;e&&t&&u({username:e,password:t})})),{onValidateLogin:u,messageError:t,statusError:r,openLoading:s,closeLoading:i,isLoading:e}}};const j=(0,C.A)($,[["render",l],["__scopeId","data-v-80e6af10"]]);var q=j}}]);
//# sourceMappingURL=337.16949733.js.map