"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[274],{6274:function(e,t,r){r.r(t),r.d(t,{default:function(){return Z}});var o=r(6768);const a={class:"flex justify-between items-center"},s={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75 z-[9999]"};function l(e,t,r,l,i,n){const d=(0,o.g2)("formTable"),c=(0,o.g2)("createForm"),u=(0,o.g2)("EditForm");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",null,[(0,o.Lk)("div",a,[t[1]||(t[1]=(0,o.Lk)("h1",{class:"font-bold lg:text-2xl text-xl text-gray-500 mb-5"}," Operadores",-1)),(0,o.Lk)("button",{class:"flex items-center justify-center bg-[#497fae] text-white font-bold px-4 py-1 rounded-lg hover:bg-[#6999c2] shadow-md mdi mdi-plus text-xl",onClick:t[0]||(t[0]=(...e)=>l.openCreateForm&&l.openCreateForm(...e))})]),(0,o.bF)(d,{items:l.items,onViewAreas:l.listAreas,onDeleteItem:l.deleteItems,onEditItem:l.openEditForm},null,8,["items","onViewAreas","onDeleteItem","onEditItem"]),l.isCreateFormVisible?((0,o.uX)(),(0,o.Wv)(c,{key:0,onClose:l.closeCreateForm,onItemCreate:l.submitItems},null,8,["onClose","onItemCreate"])):(0,o.Q3)("",!0),l.isEditFormVisible?((0,o.uX)(),(0,o.Wv)(u,{key:1,item:l.selectedItem,onClose:l.closeEditForm,onUpdateItem:l.updateItems},null,8,["item","onClose","onUpdateItem"])):(0,o.Q3)("",!0)]),l.isLoading?((0,o.uX)(),(0,o.CE)("div",s,t[2]||(t[2]=[(0,o.Lk)("div",{class:"flex flex-col items-center space-y-4"},[(0,o.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white"}),(0,o.Lk)("p",{class:"text-white text-lg font-semibold"},"Cargando, por favor espera...")],-1)]))):(0,o.Q3)("",!0)],64)}var i=r(144),n=r(1189);const d={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_BASE_URL;function c(e){return n.A.get(`${d}/operators`,{headers:{Authorization:`Bearer ${e}`}})}function u(e,t){return n.A.delete(`${d}/operators/${t}`,{headers:{Authorization:`Bearer ${e}`}})}function m(e,t){return n.A.post(`${d}/operators`,t,{headers:{Authorization:`Bearer ${e}`}})}function p(e,t,r){return n.A.patch(`${d}/operators/${r}`,t,{headers:{Authorization:`Bearer ${e}`}})}var b=r(2729),f=r(4260),g=r(9669),y=r(4750);function x(e,t,r,a,s,l){return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(y.W,{modelValue:a.search,"onUpdate:modelValue":t[0]||(t[0]=e=>a.search=e),label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",class:"mb-5 PT-3",density:"compact"},null,8,["modelValue"]),(0,o.bF)(b.J,{flat:""},{default:(0,o.k6)((()=>[(0,o.bF)(f.Py,{headers:a.headers,items:a.filteredItems,search:a.search,density:"compact",class:"ma-2"},{["item.actions"]:(0,o.k6)((({item:e})=>[(0,o.bF)(g.w,{small:"",color:"#099cb4",class:"mr-4",onClick:t=>a.editItem(e)},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)(" mdi-pencil ")]))),_:2},1032,["onClick"]),(0,o.bF)(g.w,{small:"",color:"red",onClick:t=>a.deleteItem(e)},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.eW)(" mdi-delete ")]))),_:2},1032,["onClick"])])),_:2},1032,["headers","items","search"])])),_:1})],64)}r(8992),r(4520),r(1454),r(7550);var k={name:"DataTable",props:{items:{type:Array,required:!0}},emits:["deleteItem","editItem","viewAreas"],setup(e,{emit:t}){const r=(0,i.KR)(""),a=(0,i.KR)([{key:"id",title:"ID"},{key:"user.username",title:"Usuario"},{key:"name",title:"Nombre"},{key:"phone",title:"Celular"},{key:"actions",title:"Acciones",sortable:!1}]),s=(0,o.EW)((()=>{if(!r.value)return l.value;const e=r.value.toLowerCase();return l.value.filter((t=>Object.values(t).some((t=>String(t).toLowerCase().includes(e)))))})),l=(0,o.EW)((()=>e.items.map(((e,t)=>({id:t+1,...e}))))),n=e=>{t("deleteItem",e)},d=e=>{t("editItem",e)},c=e=>{t("viewAreas",e)};return{search:r,headers:a,filteredItems:s,deleteItem:n,editItem:d,viewAreas:c}}},v=r(1241);const w=(0,v.A)(k,[["render",x],["__scopeId","data-v-52154b4a"]]);var h=w,L=r(5130);const C={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-[9999]"},I={class:"bg-white rounded-lg shadow-lg max-w-md w-full p-6"},A={class:"mb-4"},E={class:"mb-4"},F={class:"mb-4"},V={class:"mb-4"},B={class:"flex justify-end space-x-2"};function U(e,t,r,a,s,l){return a.item?((0,o.uX)(),(0,o.CE)("div",C,[(0,o.Lk)("div",I,[t[11]||(t[11]=(0,o.Lk)("h2",{class:"text-xl font-semibold text-gray-700 mb-4 text-center"},"Crear Nuevo Operador",-1)),(0,o.Lk)("form",{onSubmit:t[5]||(t[5]=(0,L.D$)(((...e)=>a.submitForm&&a.submitForm(...e)),["prevent"]))},[(0,o.Lk)("div",A,[t[6]||(t[6]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.form.name=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[L.Jo,a.form.name]])]),(0,o.Lk)("div",E,[t[7]||(t[7]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Teléfono",-1)),(0,o.bo)((0,o.Lk)("input",{type:"tel","onUpdate:modelValue":t[1]||(t[1]=e=>a.form.phone=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",placeholder:"Ej: 929831019",required:""},null,512),[[L.Jo,a.form.phone]])]),(0,o.Lk)("div",F,[t[8]||(t[8]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre de Usuario",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>a.form.username=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[L.Jo,a.form.username]])]),(0,o.Lk)("div",V,[t[9]||(t[9]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Contraseña",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[3]||(t[3]=e=>a.form.password=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[L.Jo,a.form.password]])]),(0,o.Lk)("div",B,[(0,o.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>a.closeDialog&&a.closeDialog(...e)),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"}," Cancelar "),t[10]||(t[10]=(0,o.Lk)("button",{type:"submit",class:"px-4 py-2 bg-[#396895] text-white rounded-lg hover:bg-[#396895]"}," Guardar ",-1))])],32)])])):(0,o.Q3)("",!0)}var _={emits:["close","ItemCreate"],setup(e,{emit:t}){const r=(0,i.KR)(!0),o=(0,i.KR)({name:"",phone:"",username:"",password:""}),a=()=>{t("close")},s=async()=>{t("ItemCreate",o.value)};return{item:r,form:o,closeDialog:a,submitForm:s}}};const K=(0,v.A)(_,[["render",U]]);var R=K;const T={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-[9999]"},$={class:"bg-white rounded-lg shadow-lg max-w-md w-full p-6"},j={class:"mb-4"},q={class:"mb-4"},D={class:"mb-4"},P={class:"mb-4 relative"},z={class:"flex"},N=["type"],S={class:"flex justify-end space-x-2"};function W(e,t,r,a,s,l){return r.item?((0,o.uX)(),(0,o.CE)("div",T,[(0,o.Lk)("div",$,[t[12]||(t[12]=(0,o.Lk)("h2",{class:"text-lg font-semibold text-gray-700 mb-4 text-center"},"Editar Operador",-1)),(0,o.Lk)("form",{onSubmit:t[6]||(t[6]=(0,L.D$)(((...e)=>a.submitUpdate&&a.submitUpdate(...e)),["prevent"]))},[(0,o.Lk)("div",j,[t[7]||(t[7]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.editedItem.name=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[L.Jo,a.editedItem.name]])]),(0,o.Lk)("div",q,[t[8]||(t[8]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Teléfono",-1)),(0,o.bo)((0,o.Lk)("input",{type:"tel","onUpdate:modelValue":t[1]||(t[1]=e=>a.editedItem.phone=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",placeholder:"Ej: 929831019",required:""},null,512),[[L.Jo,a.editedItem.phone]])]),(0,o.Lk)("div",D,[t[9]||(t[9]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre de Usuario",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>a.editedItem.user.username=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[L.Jo,a.editedItem.user.username]])]),(0,o.Lk)("div",P,[t[10]||(t[10]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Contraseña",-1)),(0,o.Lk)("div",z,[(0,o.bo)((0,o.Lk)("input",{type:a.showPassword?"text":"password","onUpdate:modelValue":t[3]||(t[3]=e=>a.editedItem.user.password=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,8,N),[[L.hp,a.editedItem.user.password]]),(0,o.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>a.togglePasswordVisibility&&a.togglePasswordVisibility(...e)),class:"ml-2 flex items-center text-gray-500 hover:text-gray-700"},[a.showPassword?((0,o.uX)(),(0,o.Wv)(g.w,{key:1,class:"mdi mdi-eye"})):((0,o.uX)(),(0,o.Wv)(g.w,{key:0,class:"mdi mdi-eye-off"}))])])]),(0,o.Lk)("div",S,[(0,o.Lk)("button",{type:"button",onClick:t[5]||(t[5]=t=>e.$emit("close")),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"}," Cancelar "),t[11]||(t[11]=(0,o.Lk)("button",{type:"submit",class:"px-4 py-2 bg-[#396895] text-white rounded-lg hover:bg-[#396895]"}," Guardar Cambios ",-1))])],32)])])):(0,o.Q3)("",!0)}var X={props:{item:{type:Object,required:!0}},emits:["close","updateItem"],setup(e,{emit:t}){const r=(0,i.KR)({...e.item}),a=(0,i.KR)(!1);(0,o.wB)((()=>e.item),(e=>{r.value={...e}}));const s=()=>{a.value=!a.value},l=()=>{t("updateItem",r.value)};return{editedItem:r,showPassword:a,togglePasswordVisibility:s,submitUpdate:l}}};const J=(0,v.A)(X,[["render",W]]);var O=J,Q=r(5129),G=r(4874),M=r.n(G),H={components:{formTable:h,createForm:R,EditForm:O},setup(){const e=(0,i.KR)([]),t=(0,i.KR)(null),r=(0,i.KR)(null),a=(0,i.KR)(!1),s=(0,i.KR)(!1),l=(0,i.KR)(!1),n=(0,i.KR)(!1),d=()=>{l.value=!0},b=()=>{l.value=!1},f=()=>{a.value=!0},g=()=>{a.value=!1},y=e=>{t.value=e,s.value=!0},x=()=>{s.value=!1,t.value=null},k=e=>{r.value={...e},n.value=!0},v=()=>{n.value=!1},w=async e=>{f();try{const t=Q.A.state.token,r=e._id;await p(t,e,r),v(),g(),await C(),M().fire({title:"Éxito",text:"Se actualizó correctamente.",icon:"success",confirmButtonText:"Aceptar"})}catch(t){g();const e=t.response?.data?.message||t.response?.data||"Error al actualizar.";M().fire({title:"Error",text:e,icon:"error",confirmButtonText:"Aceptar"})}},h=async e=>{try{const t=Q.A.state.token;await m(t,e),await C(),b(),M().fire({title:"Éxito",text:"Se creó correctamente.",icon:"success",confirmButtonText:"Aceptar"})}catch(t){const e=t.response?.data?.message||t.response?.data||"Error al crear.";M().fire({title:"Error",text:e,icon:"error",confirmButtonText:"Aceptar"})}},L=async e=>{const t=await M().fire({title:"¿Estás seguro?",text:"No podrás revertir esto.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#f7a304",cancelButtonColor:"#deddda",cancelButtonText:"Cancelar",confirmButtonText:"Sí, eliminar",reverseButtons:!0});if(t.isConfirmed){f();try{const t=Q.A.state.token,r=e._id;await u(t,r),g(),await C(),M().fire({title:"Éxito",text:"Se eliminó correctamente.",icon:"success",confirmButtonText:"Aceptar"})}catch(r){g();const e=r.response?.data?.message||r.response?.data||"Error al eliminar.";M().fire({title:"Error",text:e,icon:"error",confirmButtonText:"Aceptar"})}}},C=async()=>{f();try{const t=Q.A.state.token,r=await c(t);e.value=r.data.data,g()}catch(t){g();const e=t.response?.data?.message||t.response?.data||"Error al obtener los operadores.";M().fire({title:"Error",text:e,icon:"error",confirmButtonText:"Aceptar"})}};return(0,o.sV)(C),{items:e,fetchItems:C,openLoading:f,closeLoading:g,isLoading:a,listAreas:y,closeAreasModal:x,selectedAreas:t,isAreasModalVisible:s,deleteItems:L,isCreateFormVisible:l,openCreateForm:d,closeCreateForm:b,submitItems:h,updateItems:w,openEditForm:k,closeEditForm:v,isEditFormVisible:n,selectedItem:r}}};const Y=(0,v.A)(H,[["render",l]]);var Z=Y}}]);
//# sourceMappingURL=274.79ffe271.js.map