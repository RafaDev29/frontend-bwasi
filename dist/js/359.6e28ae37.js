"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[359],{9980:function(e,t,a){a.d(t,{$x:function(){return s},F7:function(){return c},Qt:function(){return i},ZL:function(){return o},ZZ:function(){return l}});var r=a(1189);const n={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_BASE_URL;function o(e){return r.A.get(`${n}/areas`,{headers:{Authorization:`Bearer ${e}`}})}function s(e,t){return r.A.delete(`${n}/areas/${t}`,{headers:{Authorization:`Bearer ${e}`}})}function i(e,t){return r.A.post(`${n}/areas`,t,{headers:{Authorization:`Bearer ${e}`}})}function l(e,t,a){return r.A.patch(`${n}/areas/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}function c(e,t,a){return r.A.patch(`${n}/areas/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}},2683:function(e,t,a){a.d(t,{GP:function(){return s},LO:function(){return i},Pu:function(){return o},ek:function(){return l}});var r=a(1189);const n={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_BASE_URL;function o(e){return r.A.get(`${n}/type-areapoints`,{headers:{Authorization:`Bearer ${e}`}})}function s(e,t){return r.A.delete(`${n}/type-areapoints/${t}`,{headers:{Authorization:`Bearer ${e}`}})}function i(e,t){return r.A.post(`${n}/type-areapoints`,t,{headers:{Authorization:`Bearer ${e}`}})}function l(e,t,a){return r.A.patch(`${n}/type-areapoints/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}},359:function(e,t,a){a.r(t),a.d(t,{default:function(){return de}});var r=a(6768),n=a(4232);const o={class:"flex justify-between items-center"},s={class:"font-bold lg:text-2xl text-xl text-gray-500 mb-5"},i={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75 z-[9999]"};function l(e,t,a,l,c,d){const u=(0,r.g2)("DataTable"),m=(0,r.g2)("createForm"),f=(0,r.g2)("EditForm");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",null,[(0,r.Lk)("div",o,[(0,r.Lk)("h1",s,(0,n.v_)(l.nameAntenna),1),(0,r.Lk)("button",{class:"flex items-center justify-center bg-[#497fae] text-white font-bold px-4 py-1 rounded-lg hover:bg-[#6999c2] shadow-md mdi mdi-plus text-xl",onClick:t[0]||(t[0]=(...e)=>l.openCreateForm&&l.openCreateForm(...e))})]),(0,r.bF)(u,{items:l.items,onViewAntennas:l.listAntennas,onDeleteItem:l.deleteItems,onEditItem:l.openEditForm},null,8,["items","onViewAntennas","onDeleteItem","onEditItem"]),l.isCreateFormVisible?((0,r.uX)(),(0,r.Wv)(m,{key:0,onClose:l.closeCreateForm,onItemCreate:l.submitItems},null,8,["onClose","onItemCreate"])):(0,r.Q3)("",!0),l.isEditFormVisible?((0,r.uX)(),(0,r.Wv)(f,{key:1,item:l.selectedItem,onClose:l.closeEditForm,onUpdateItem:l.updateItems},null,8,["item","onClose","onUpdateItem"])):(0,r.Q3)("",!0)]),l.isLoading?((0,r.uX)(),(0,r.CE)("div",i,t[1]||(t[1]=[(0,r.Lk)("div",{class:"flex flex-col items-center space-y-4"},[(0,r.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white"}),(0,r.Lk)("p",{class:"text-white text-lg font-semibold"},"Cargando, por favor espera...")],-1)]))):(0,r.Q3)("",!0)],64)}var c=a(144),d=a(5129),u=a(1189);const m={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_BASE_URL;function f(e,t){return u.A.get(`${m}/area-points/${t}`,{headers:{Authorization:`Bearer ${e}`}})}function p(e,t){return u.A.delete(`${m}/area-points/${t}`,{headers:{Authorization:`Bearer ${e}`}})}function b(e,t){return u.A.post(`${m}/area-points`,t,{headers:{Authorization:`Bearer ${e}`}})}function g(e,t,a){return u.A.patch(`${m}/area-points/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}var y=a(5130);const k={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-[9999]"},v={class:"bg-white rounded-lg shadow-lg max-w-md w-full p-6"},x={class:"text-xl font-semibold text-gray-700 mb-4 text-center"},A={class:"mb-4"},h={class:"mb-4"},I={for:"countries",class:"block text-sm font-medium text-gray-500 mb-1"},_=["value"],C={class:"mb-4"},E={for:"countries",class:"block text-sm font-medium text-gray-500 mb-1"},L=["value"],w={class:"flex justify-end space-x-2"};function $(e,t,a,o,s,i){return o.item?((0,r.uX)(),(0,r.CE)("div",k,[(0,r.Lk)("div",v,[(0,r.Lk)("h2",x,"Crear "+(0,n.v_)(o.nameAntenna),1),(0,r.Lk)("form",{onSubmit:t[4]||(t[4]=(0,y.D$)(((...e)=>o.submitForm&&o.submitForm(...e)),["prevent"]))},[(0,r.Lk)("div",A,[t[5]||(t[5]=(0,r.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Mac",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.form.mac=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[y.Jo,o.form.mac]])]),(0,r.Lk)("div",h,[(0,r.Lk)("label",I," Seleccionar "+(0,n.v_)(o.nameArea),1),(0,r.bo)((0,r.Lk)("select",{id:"countries","onUpdate:modelValue":t[1]||(t[1]=e=>o.form.areaId=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-#497fae-500 focus:border-#497fae-500 block w-full p-2.5 dark:placeholder-gray-400 dark:text-black dark:focus:ring-#497fae-500 dark:focus:border-#497fae-500"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.areas,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e._id,value:e._id},(0,n.v_)(e.name),9,_)))),128))],512),[[y.u1,o.form.areaId]])]),(0,r.Lk)("div",C,[(0,r.Lk)("label",E," Seleccionar categoria de "+(0,n.v_)(o.nameAntenna),1),(0,r.bo)((0,r.Lk)("select",{id:"countries","onUpdate:modelValue":t[2]||(t[2]=e=>o.form.typeId=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-#497fae-500 focus:border-#497fae-500 block w-full p-2.5 dark:placeholder-gray-400 dark:text-black dark:focus:ring-#497fae-500 dark:focus:border-#497fae-500"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.cantennas,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e._id,value:e._id},(0,n.v_)(e.name),9,L)))),128))],512),[[y.u1,o.form.typeId]])]),(0,r.Lk)("div",w,[(0,r.Lk)("button",{type:"button",onClick:t[3]||(t[3]=(...e)=>o.closeDialog&&o.closeDialog(...e)),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"}," Cancelar "),t[6]||(t[6]=(0,r.Lk)("button",{type:"submit",class:"px-4 py-2 bg-[#396895] text-white rounded-lg hover:bg-[#396895]"}," Guardar ",-1))])],32)])])):(0,r.Q3)("",!0)}var B=a(9980),F=a(2683),V={emits:["close","ItemCreate"],setup(e,{emit:t}){const a=d.A.getters.getItemName("Puntos de área"),n=d.A.getters.getItemName("Áreas"),o=(0,c.KR)(!0),s=(0,c.KR)([]),i=(0,c.KR)([]),l=(0,c.KR)({name:"",areaId:"",typeId:""}),u=async()=>{try{const e=d.A.state.token,t=await(0,B.ZL)(e);t&&(s.value=t.data.data,console.log("listado de areas correctamente"))}catch(e){console.assert("erro al listar areas")}},m=async()=>{try{const e=d.A.state.token,t=await(0,F.Pu)(e);t&&(i.value=t.data.data)}catch(e){console.log("error al listar categoria de antenas xd.")}},f=()=>{t("close")},p=async()=>{t("ItemCreate",l.value)};return(0,r.sV)(u(),m()),{item:o,form:l,closeDialog:f,submitForm:p,listAreas:u,areas:s,listCAntenna:m,cantennas:i,nameAntenna:a,nameArea:n}}},K=a(1241);const R=(0,K.A)(V,[["render",$]]);var U=R;const z={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-[9999]"},D={class:"bg-white rounded-lg shadow-lg max-w-md w-full p-6"},N={class:"text-lg font-semibold text-gray-700 mb-4 text-center"},S={class:"mb-4"},X={class:"mb-4"},P={for:"countries",class:"block text-sm font-medium text-gray-500 mb-1"},j=["value"],O={class:"mb-4"},T={for:"countries",class:"block text-sm font-medium text-gray-500 mb-1"},W=["value"],Q={class:"flex justify-end space-x-2"};function q(e,t,a,o,s,i){return a.item?((0,r.uX)(),(0,r.CE)("div",z,[(0,r.Lk)("div",D,[(0,r.Lk)("h2",N,"Editar "+(0,n.v_)(o.nameAntenna),1),(0,r.Lk)("form",{onSubmit:t[4]||(t[4]=(0,y.D$)(((...e)=>o.submitUpdate&&o.submitUpdate(...e)),["prevent"]))},[(0,r.Lk)("div",S,[t[5]||(t[5]=(0,r.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.editedItem.mac=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-#497fae-500 focus:border-#497fae-500",required:""},null,512),[[y.Jo,o.editedItem.mac]])]),(0,r.Lk)("div",X,[(0,r.Lk)("label",P," Seleccionar "+(0,n.v_)(o.nameArea),1),(0,r.bo)((0,r.Lk)("select",{id:"countries","onUpdate:modelValue":t[1]||(t[1]=e=>o.editedItem.area._id=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-#497fae-500 focus:border-#497fae-500 block w-full p-2.5 dark:placeholder-gray-400 dark:text-black dark:focus:ring-#497fae-500 dark:focus:border-#497fae-500"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.areas,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e._id,value:e._id},(0,n.v_)(e.name),9,j)))),128))],512),[[y.u1,o.editedItem.area._id]])]),(0,r.Lk)("div",O,[(0,r.Lk)("label",T," Seleccionar Categoria de "+(0,n.v_)(o.nameAntenna),1),(0,r.bo)((0,r.Lk)("select",{id:"countries","onUpdate:modelValue":t[2]||(t[2]=e=>o.editedItem.typeId._id=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-#497fae-500 focus:border-#497fae-500 block w-full p-2.5 dark:placeholder-gray-400 dark:text-black dark:focus:ring-#497fae-500 dark:focus:border-#497fae-500"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.typeIds,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e._id,value:e._id},(0,n.v_)(e.name),9,W)))),128))],512),[[y.u1,o.editedItem.typeId._id]])]),(0,r.Lk)("div",Q,[(0,r.Lk)("button",{type:"button",onClick:t[3]||(t[3]=t=>e.$emit("close")),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"}," Cancelar "),t[6]||(t[6]=(0,r.Lk)("button",{type:"submit",class:"px-4 py-2 bg-[#396895] text-white rounded-lg hover:bg-[#396895]"}," Guardar Cambios ",-1))])],32)])])):(0,r.Q3)("",!0)}a(8992),a(2577);var Z={props:{item:{type:Object,required:!0}},emits:["close","updateItem"],setup(e,{emit:t}){const a=d.A.getters.getItemName("Puntos de área"),n=d.A.getters.getItemName("Áreas"),o=(0,c.KR)({...e.item,typeId:e.item.typeId||{_id:"",name:""}}),s=(0,c.KR)([]),i=(0,c.KR)([]);(0,r.wB)((()=>e.item),(e=>{o.value={...e}}));const l=async()=>{try{const e=d.A.state.token,t=await(0,B.ZL)(e);s.value=t.data.data}catch(e){console.log("error al obtener areas")}},u=async()=>{try{const e=d.A.state.token,t=await(0,F.Pu)(e);i.value=t.data.data,t&&console.log("se listo las categorias cone xito")}catch(e){console.error("error al listar categoria ")}};(0,r.wB)((()=>o.value.area._id),(e=>{const t=s.value.find((t=>t._id===e));t&&(o.value.area={...t})})),(0,r.wB)((()=>o.value.typeId._id),(e=>{const t=i.value.find((t=>t._id===e));t&&(o.value.typeId={...t})}));const m=()=>{t("updateItem",o.value),console.log("assssssssssssssssssssssss")};return(0,r.sV)(l(),u()),{editedItem:o,submitUpdate:m,listAreas:l,areas:s,listCAntenna:u,typeIds:i,nameAntenna:a,nameArea:n}}};const M=(0,K.A)(Z,[["render",q]]);var G=M,J=a(2729),H=a(4260),Y=a(9669),ee=a(4750);function te(e,t,a,n,o,s){return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(ee.W,{modelValue:n.search,"onUpdate:modelValue":t[0]||(t[0]=e=>n.search=e),label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",class:"mb-5 pt-1",density:"compact"},null,8,["modelValue"]),(0,r.bF)(J.J,{flat:""},{default:(0,r.k6)((()=>[(0,r.bF)(H.Py,{headers:n.headers,items:n.filteredItems,search:n.search,density:"compact",class:"ma-2"},{["item.actions"]:(0,r.k6)((({item:e})=>[(0,r.bF)(Y.w,{small:"",color:"#099cb4",class:"mr-4",onClick:t=>n.editItem(e)},{default:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.eW)(" mdi-pencil ")]))),_:2},1032,["onClick"]),(0,r.bF)(Y.w,{small:"",color:"red",onClick:t=>n.deleteItem(e)},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.eW)(" mdi-delete ")]))),_:2},1032,["onClick"])])),_:2},1032,["headers","items","search"])])),_:1})],64)}a(4520),a(1454),a(7550);var ae={name:"DataTable",props:{items:{type:Array,required:!0}},emits:["deleteItem","editItem"],setup(e,{emit:t}){const a=(0,c.KR)(""),n=(0,c.KR)([{key:"id",title:"ID"},{key:"mac",title:"MAC"},{key:"area.name",title:"Area"},{key:"actions",title:"Acciones",sortable:!1}]),o=(0,r.EW)((()=>d.A.getters.getItemName("Áreas"))),s=(0,r.EW)((()=>n.value.map((e=>"area.name"===e.key?{...e,title:o.value}:e)))),i=(0,r.EW)((()=>{if(!a.value)return l.value;const e=a.value.toLowerCase();return l.value.filter((t=>Object.values(t).some((t=>String(t).toLowerCase().includes(e)))))})),l=(0,r.EW)((()=>e.items.map(((e,t)=>({id:t+1,...e}))))),u=e=>{t("deleteItem",e)},m=e=>{t("editItem",e)};return{search:a,filteredItems:i,deleteItem:u,editItem:m,headers:s}}};const re=(0,K.A)(ae,[["render",te],["__scopeId","data-v-6da7283d"]]);var ne=re,oe=a(4874),se=a.n(oe),ie=a(1387),le={props:{id:{type:String,default:null}},components:{DataTable:ne,createForm:U,EditForm:G},setup(e){const t=d.A.getters.getItemName("Puntos de área"),a=(0,ie.lq)(),n=(0,c.KR)(e.id||a.params.id),o=(0,c.KR)([]),s=(0,c.KR)(null),i=(0,c.KR)(null),l=(0,c.KR)(!1),u=(0,c.KR)(!1),m=(0,c.KR)(!1),y=(0,c.KR)(!1),k=()=>{m.value=!0},v=()=>{m.value=!1},x=()=>{l.value=!0},A=()=>{l.value=!1},h=e=>{s.value=e,u.value=!0},I=()=>{u.value=!1,s.value=null},_=e=>{i.value={...e},y.value=!0},C=()=>{y.value=!1},E=async e=>{x();try{const t=d.A.state.token,a=e._id,r={name:e.mac,areaId:e.area._id,typeId:e.typeId._id},n=await g(t,r,a);n&&(C(),A(),se().fire({title:"Éxito",text:"La antena fue actualizada correctamente.",icon:"success",confirmButtonText:"Aceptar"})),await $()}catch(t){A();const e=t.response?.data?.message||t.response?.data||"Ocurrió un error inesperado";console.error("Error al actualizar la antena:",e),se().fire({title:"Error",text:e,icon:"error",confirmButtonText:"Aceptar"})}},L=async e=>{try{const t=d.A.state.token,a={mac:e.mac,areaId:e.areaId,typeId:e.typeId};await b(t,a),await $(),v(),se().fire({title:"Éxito",text:"El elemento fue creado correctamente.",icon:"success",confirmButtonText:"Aceptar"})}catch(t){v();const e=t.response?.data?.message||t.response?.data||"Ocurrió un error inesperado";console.error("Error al crear el área:",e),se().fire({title:"Error",text:e,icon:"error",confirmButtonText:"Aceptar"})}},w=async e=>{try{const t=await se().fire({title:"¿Estás seguro?",text:"No podrás revertir esto.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#f7a304",cancelButtonColor:"#deddda",cancelButtonText:"Cancelar",confirmButtonText:"Sí, eliminar",reverseButtons:!0});if(!t.isConfirmed)return;x();const a=d.A.state.token,r=e._id,n=await p(a,r);n&&(A(),se().fire("Eliminado","El elemento ha sido eliminado con éxito.","success")),await $()}catch(t){A(),console.error("Error al eliminar el elemento:",t),se().fire("Error","Ocurrió un error al intentar eliminar el elemento.","error")}},$=async()=>{if(n.value){x();try{const e=d.A.state.token,t=await f(e,n.value);o.value=t.data.data}catch(e){console.error("Error al obtener las antenas:",e)}finally{A()}}else console.warn("No se proporcionó un ID de antena. Cancelando fetchItems.")};return(0,r.sV)($),(0,r.wB)((()=>a.params.id),(e=>{n.value=e,$()})),{items:o,fetchItems:$,openLoading:x,closeLoading:A,isLoading:l,listAntennas:h,closeAntennaModal:I,deleteItems:w,isCreateFormVisible:m,openCreateForm:k,closeCreateForm:v,submitItems:L,updateItems:E,openEditForm:_,closeEditForm:C,isEditFormVisible:y,selectedItem:i,isAntennasModalVisible:u,selectedAntennas:s,antennaId:n,nameAntenna:t}}};const ce=(0,K.A)(le,[["render",l]]);var de=ce}}]);
//# sourceMappingURL=359.6e28ae37.js.map